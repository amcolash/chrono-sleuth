var t=Object.defineProperty,e=(e,r,n)=>(((e,r,n)=>{r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n})(e,"symbol"!=typeof r?r+"":r,n),n);import{p as r,g as n,c as o,a as i}from"./phaser-pZmLa9DQ.js";function s(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((t=>navigator.userAgent.match(t)))}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const r of t)if("childList"===r.type)for(const t of r.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();let a=!1,l=!1;l=!0;let c=1280,h=720,u=!1;u=!0,s(),c=960,h=540,a=!1,l=!1;const p={debug:!1,width:960,height:540,cameraOffset:180,zoomed:true,dayMinutes:.25,rewindEnabled:!1,fastMode:!1};class y extends r.Scene{constructor(){super("Boot")}preload(){}create(){this.scene.start("Preloader")}}const f={White:"fcfee9",Tan:"e6c99d",Peach:"d07151",Brown:"473946",Teal:"303646",Black:"1c1831",Lights:"ffccaa",Night:"335588"};function d(t){return r.Display.Color.HexStringToColor(t).color}function g(t){return d(r.Display.Color.RGBToString(255*t.r,255*t.g,255*t.b))}const m={fontFamily:"m6x11, sans-serif",fontSize:24,color:`#${f.White}`};var b=(t=>(t[t.Backgrounds=0]="Backgrounds",t[t.Warpers=1]="Warpers",t[t.Npcs=2]="Npcs",t[t.Items=3]="Items",t[t.Player=4]="Player",t[t.Shader=5]="Shader",t[t.Ui=6]="Ui",t[t.Ui2=7]="Ui2",t[t.Overlay=8]="Overlay",t[t.Debug=9]="Debug",t))(b||{});class v extends r.GameObjects.Container{constructor(t,r,n){super(t,40,p.height-60),e(this,"currentTime",0),e(this,"rewindCount",0),e(this,"player"),e(this,"rewindable"),e(this,"rewinding",!1),e(this,"counter",0),e(this,"bar"),e(this,"hand"),e(this,"timeText"),e(this,"dayOver"),this.setVisible(p.rewindEnabled).setDepth(b.Ui).setScrollFactor(0),this.scene.add.existing(this),this.rewindable=r,this.player=n,this.add(t.add.sprite(0,0,"watch").setScale(.25)),this.hand=t.add.rectangle(0,10,3,14,d(f.Black)).setOrigin(0,0),this.add(this.hand),this.timeText=t.add.text(15,10,"",m).setScrollFactor(0),this.bar=t.add.rectangle(0,p.height-6,0,6,13412864).setScrollFactor(0)}update(t,e){}}class w extends r.GameObjects.GameObject{constructor(t,r,n,o,i,s){super(t,"Light"),e(this,"x"),e(this,"y"),e(this,"light"),e(this,"debug"),t.add.existing(this),this.light=t.lights.addLight(r,n,o,i,s),this.debug=t.add.graphics({x:r,y:n}).setDepth(b.Debug),this.debug.lineStyle(3,65280),this.x=r,this.y=n,p.debug&&this.debug.strokeCircle(0,0,o)}setPosition(t,e){this.light.setPosition(t,e),this.debug.setPosition(t,e),this.x=t,this.y=e}destroy(t){var e,r;super.destroy(t),this.debug.destroy(),null==(r=null==(e=this.scene)?void 0:e.lights)||r.removeLight(this.light)}}function x(){return Math.random()-.5}const S=[500,200,100,50,10];class k extends r.GameObjects.GameObject{constructor(t,n,o,i=30,s=[1e3,400]){super(t,"fireflies"),e(this,"lights",[]),e(this,"count"),e(this,"centers",[]),e(this,"bounds",[1e3,400]),e(this,"biases",[]),this.scene.add.existing(this),this.count=i,this.bounds=s;for(let e=0;e<this.count;e++){const e=new r.Display.Color(40*Math.random()+50,60*Math.random()+190,20*Math.random()+10),i=t.lights.addPointLight(0,0,e.color,7*Math.random()+3,.15,.045+.02*x());this.lights.push(i),this.centers.push(new r.Math.Vector2(n+Math.random()*s[0]-s[0]/2,o+Math.random()*s[1]-s[1]/2));const a=[];for(let t=0;t<2*S.length;t++)a.push(x()*S[t%S.length]);a.push(10*x()),this.biases.push(a)}}update(t,e){const r=t/1e3*.025,n=Math.cos(r),o=Math.sin(r);this.lights.forEach(((t,e)=>{const i=this.biases[e],s=Math.cos(70*r+i[10]);t.intensity=Math.min(.05+Math.abs(i[4]*s+i[3]*n+i[4]*n)/50,.4),t.x=n*i[0]+o*i[1]+n*i[2]+o*i[3]+n*i[4]+this.centers[e].x,t.y=o*i[5]+n*i[6]+o*i[7]+n*i[8]+o*i[9]+this.centers[e].y}))}}var j=(t=>(t[t.None=0]="None",t[t.Teleported=1]="Teleported",t[t.Talked=2]="Talked",t[t.Item=3]="Item",t))(j||{}),O=(t=>(t[t.Underground=0]="Underground",t[t.Town=1]="Town",t[t.TownEast=2]="TownEast",t[t.Forest=3]="Forest",t[t.ForestEast=4]="ForestEast",t[t.Lake=5]="Lake",t[t.TownNorth=6]="TownNorth",t[t.ClockSquare=7]="ClockSquare",t[t.ClockSquareNorth=8]="ClockSquareNorth",t[t.ClockEntrance=9]="ClockEntrance",t[t.ClockStairs=10]="ClockStairs",t[t.ClockTop=11]="ClockTop",t))(O||{}),T=(t=>(t[t.Wrench=0]="Wrench",t[t.Gear1=1]="Gear1",t))(T||{}),P=(t=>(t[t.ForestGear=0]="ForestGear",t[t.SphinxRiddle=1]="SphinxRiddle",t))(P||{}),A=(t=>(t[t.Inventor=0]="Inventor",t[t.Stranger=1]="Stranger",t[t.Sphinx=2]="Sphinx",t[t.Mayor=3]="Mayor",t[t.ClockTower=4]="ClockTower",t))(A||{}),I=(t=>(t[t.Sphinx=0]="Sphinx",t))(I||{}),E=(t=>(t[t.FixTheClock=0]="FixTheClock",t[t.ForestMazeSolved=1]="ForestMazeSolved",t[t.SphinxRiddleSolved=2]="SphinxRiddleSolved",t[t.MetTheMayor=3]="MetTheMayor",t[t.ClockFirstGear=4]="ClockFirstGear",t))(E||{}),C=(t=>(t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right",t[t.Continue=4]="Continue",t[t.Back=5]="Back",t))(C||{});class M{constructor(t){e(this,"scene"),e(this,"keys",{0:!1,1:!1,2:!1,3:!1,4:!1,5:!1}),this.scene=t,this.listener(2,"LEFT"),this.listener(3,"RIGHT"),this.listener(0,"UP"),this.listener(1,"DOWN"),this.listener(0,"W"),this.listener(2,"A"),this.listener(1,"S"),this.listener(3,"D"),this.listener(4,"SPACE"),this.listener(4,"ENTER"),this.listener(5,"BACKSPACE")}listener(t,e){var r,n;null==(r=this.scene.input.keyboard)||r.on(`keydown-${e}`,(()=>this.keys[t]=!0)),null==(n=this.scene.input.keyboard)||n.on(`keyup-${e}`,(()=>this.keys[t]=!1))}resetKeys(){this.keys[0]=!1,this.keys[1]=!1,this.keys[2]=!1,this.keys[3]=!1,this.keys[4]=!1,this.keys[5]=!1}}const F={[A.Inventor]:{x:550,y:635,scale:.75,img:"inventor",portrait:"inventor_portrait",name:"Johan the Inventor"},[A.Stranger]:{x:750,y:865,scale:1.35,img:"stranger",portrait:"stranger_portrait",name:"Mysterious Stranger"},[A.Sphinx]:{x:3520,y:780,scale:1,img:"sphinx",portrait:"sphinx_portrait",name:"Mystical Sphinx",onCreate:t=>W(t.scene,!1),light:1.85},[A.Mayor]:{x:1065,y:-340,scale:.9,img:"mayor",portrait:"mayor_portrait",name:"Mayor of Town"},[A.ClockTower]:{x:880,y:-2090,scale:.5,img:"warp",portrait:"clock_portrait",name:"Clock Tower",particles:{texture:"warp",scale:{start:0,end:1.1},alpha:{start:1,end:0},lifespan:2e3,delay:1e3,maxAliveParticles:1,tint:[13067088]}}};class D extends Phaser.Physics.Arcade.Sprite{constructor(t,r,n){const{x:o,y:i,img:s,scale:a,onCreate:l,light:c,particles:h}=F[r];super(t,o,i,s),e(this,"npcType"),e(this,"player"),e(this,"light"),e(this,"particles"),this.setScale(a).setDepth(b.Npcs).setPipeline("Light2D"),"warp"===s&&this.setAlpha(0),t.add.existing(this),t.physics.add.existing(this),p.debug&&this.setInteractive({draggable:!0}),p.debug?this.light=new w(t,this.x,this.y,this.displayHeight/150*150,16764074,c||1):this.light=t.lights.addLight(this.x,this.y,this.displayHeight/150*150,16764074,c||1),this.npcType=r,this.player=n,h&&(this.particles=t.add.particles(o,i,"",h)),l&&l(this)}update(t,e){this.light.setPosition(this.x,this.y)}onInteract(t){if(this.player.message.visible||Date.now()<this.player.message.interactionTimeout)return j.None;if(t[C.Continue]){const t=function(t,e){const r=Q[t]||[];for(const i of r){const{conditions:t}=i,r=[];if(void 0!==(null==t?void 0:t.hasItem)&&r.push((n=e.inventory.inventory,o=t.hasItem,n.includes(o))),void 0!==(null==t?void 0:t.completedQuest)&&r.push(_(e.quests.quests,t.completedQuest)),void 0!==(null==t?void 0:t.activeQuest)&&r.push(U(e.quests.quests,t.activeQuest)),void 0!==(null==t?void 0:t.journalEntry)&&r.push(z(e.journal.journal,t.journalEntry)),null==t?void 0:t.invert)if(null==t?void 0:t.or){if(r.every((t=>!t)))return i}else if(r.every((t=>!t)))return i;if(null==t?void 0:t.or){if(r.some((t=>t)))return i}else if(r.every((t=>t)))return i}var n,o}(this.npcType,this.player);if(!t)return j.None;const e=F[this.npcType].portrait.length>0;return this.player.message.setDialog(t,e?this:void 0),j.Talked}return j.None}getButtonPrompt(){return this.npcType===A.ClockTower?["Inspect Clock Tower","Press [CONTINUE]"]:[`Talk to ${F[this.npcType].name}`,"Press [CONTINUE]"]}}const B=[{x:40,y:600},{x:1750,y:600},{x:90,y:820},{x:1650,y:820},{x:550,y:-400},{x:1150,y:-400},{x:640,y:-1380},{x:930,y:-1470},{x:740,y:-2050},{x:930,y:-2115},{x:2600,y:760},{x:3630,y:760,id:I.Sphinx},{x:4575,y:870},{x:5150,y:870}];class R extends r.Physics.Arcade.StaticGroup{constructor(t){super(t.physics.world,t),B.forEach((e=>{const r=t.add.rectangle(e.x,e.y,6,100).setOrigin(0).setVisible(p.debug);r.setData("WallType",e.id),p.debug&&r.setInteractive({draggable:!0}),this.add(r)}))}}const G={[O.Town]:{x:300,y:650,key:C.Down,warpTo:O.Underground,visual:0},[O.Underground]:{x:301,y:875,key:C.Up,warpTo:O.Town,visual:0},[O.TownEast]:{x:1720,y:650,key:C.Right,warpTo:O.Forest,visual:2},[O.Forest]:{x:2650,y:810,key:C.Left,warpTo:O.TownEast,visual:1},[O.TownNorth]:{x:775,y:650,key:C.Up,warpTo:O.ClockSquare,visual:2},[O.ClockSquare]:{x:610,y:-330,key:C.Left,warpTo:O.TownNorth,visual:1},[O.ClockSquareNorth]:{x:915,y:-330,key:C.Up,warpTo:O.ClockEntrance,visual:2},[O.ClockEntrance]:{x:690,y:-1320,key:C.Left,warpTo:O.ClockSquareNorth,visual:1},[O.ClockStairs]:{x:890,y:-1400,key:C.Right,warpTo:O.ClockTop,visual:3},[O.ClockTop]:{x:780,y:-1970,key:C.Left,warpTo:O.ClockStairs,visual:3},[O.ForestEast]:{x:3590,y:810,key:C.Right,warpTo:O.Lake,visual:2},[O.Lake]:{x:4625,y:915,key:C.Left,warpTo:O.ForestEast,visual:1}};class N extends r.Physics.Arcade.Sprite{constructor(t,n,o){const{x:i,y:s,visual:a,warpTo:l}=G[n];if(super(t,i,s,0===a?"ladder":"warp"),e(this,"warpType"),e(this,"player"),e(this,"particles1"),e(this,"particles2"),this.warpType=n,this.player=o,this.setScale(.6).setPipeline("Light2D"),t.add.existing(this),t.physics.add.existing(this),p.debug){this.setInteractive({draggable:!0});const e=G[l],r=t.add.graphics(),o=n%2==0?16776960:65535;r.fillStyle(o),r.lineStyle(3,o);let a=-this.displayWidth/2,c=-this.displayHeight/2;e.x>i&&(a*=-1),e.y>s&&(c*=-1);const h=new Phaser.Geom.Line(i+a,s+c,e.x+a,e.y+c);r.strokeLineShape(h),r.fillRect(i+a-7,s+c-7,14,14)}1!==a&&2!==a||(this.particles1=t.add.particles(i,s,"warp",{x:{min:-3,max:3},y:{min:-3,max:3},speed:{random:[-40,40]},scale:{min:.35,max:.5},alpha:{start:.2,end:0},angle:{min:0,max:360},color:[d(f.Teal),d(f.White),d(f.Tan)],colorEase:"Linear",radial:!0,blendMode:r.BlendModes.OVERLAY}).setScale(1,1.75).setPipeline("Light2D"),this.particles2=t.add.particles(i,s,"warp",{x:{min:-30,max:30},y:{min:-50,max:50},speed:{random:[-5,5]},scale:{min:.05,max:.15},alpha:{values:[0,.2,0]},angle:{min:0,max:360},lifespan:{min:1e3,max:1400},color:[d(f.Peach),d(f.White),d(f.Tan)],colorEase:"Linear",radial:!0,maxAliveParticles:20}).setPipeline("Light2D")),n===O.Underground&&(t.add.sprite(i,s-60,"ladder").setScale(.6).setPipeline("Light2D"),t.add.sprite(i,s-105,"ladder").setScale(.6).setPipeline("Light2D")),3===a&&this.setAlpha(0),this.setVisible(2!==a)}onInteract(t){const e=t[G[this.warpType].key];return!e||this.warpType!==O.TownEast||z(this.player.journal.journal,E.ForestMazeSolved)||p.debug?e?(L(G[this.warpType].warpTo,this.player),j.Teleported):j.None:(this.scene.scene.pause(),this.scene.scene.launch("MazeDialog",{player:this.player}),j.None)}getButtonPrompt(){const t=G[this.warpType].key;let e;return t===C.Continue&&(e="[CONTINUE]"),t===C.Up&&(e="[Up]"),t===C.Down&&(e="[Down]"),t===C.Left&&(e="[Left]"),t===C.Right&&(e="[Right]"),[`Travel to ${O[G[this.warpType].warpTo]}`,"Press "+e]}setVisible(t){return super.setVisible(t),this.particles1&&this.particles2&&(t?(this.particles1.start(),this.particles2.start()):(this.particles1.stop(),this.particles1.killAll(),this.particles2.stop(),this.particles2.killAll())),this}destroy(t){this.particles1&&this.particles2&&(this.particles1.destroy(),this.particles2.destroy()),super.destroy(t)}}function L(t,e){const{x:n,y:o}=G[t],i=e.scene,s=n-i.cameras.main.width/2,a=o-i.cameras.main.height/2;i.cameras.main.stopFollow(),i.tweens.add({targets:i.cameras.main,scrollX:s,scrollY:a-p.cameraOffset,duration:400,ease:"Power1",onComplete:()=>{i.cameras.main.startFollow(e),i.cameras.main.setFollowOffset(0,p.cameraOffset)}}),e.setActive(!1),i.tweens.add({targets:e,alpha:0,duration:300,ease:"Power1",yoyo:!0,repeat:0,onYoyo:()=>{e.setPosition(n,o)},onComplete:()=>{e.alpha=1,e.setActive(!0)}});const l=e.light instanceof r.GameObjects.Light?e.light:e.light.light;i.tweens.add({targets:l,x:n,y:o,duration:300,ease:"Power1"})}function W(t,e,n){var o,i;const s=function(t,e){return $(t,D).find((t=>t.npcType===e))}(t,A.Sphinx);V(t,O.ForestEast,!0===e);const a=function(t,e){return $(t,r.GameObjects.Rectangle).find((t=>t.getData("WallType")===e))}(t,I.Sphinx);if(a&&(e?a.setX((null==(o=B.find((t=>t.id===I.Sphinx)))?void 0:o.x)||0):a.setX(a.x-150),null==(i=a.body)||i.updateFromGameObject()),!s)return;const{x:l,y:c}=F[A.Sphinx],h=e?l+200:l,u=e?c-90:c;t.tweens.add({targets:s,alpha:0,duration:!e||n?0:300,ease:"Power1",yoyo:!0,repeat:0,onYoyo:()=>{s.setPosition(h,u)},onComplete:()=>{s.alpha=1}}),t.tweens.add({targets:s.light,x:h,y:u,duration:!e||n?0:450,ease:"Power1"})}function U(t,e){return t.some((t=>t.id===e&&!t.completed))}function _(t,e){return t.some((t=>t.id===e&&t.completed))}function z(t,e){return t.includes(e)}function $(t,e){return t.children.getAll().filter((t=>t instanceof e))}function V(t,e,r){const n=function(t,e){return $(t,N).find((t=>t.warpType===e))}(t,e);n&&n.setVisible(r)}function q(t){return t.scene.get("Game").clock.rewindCount||0}const H=[{question:"I speak without a mouth and hear without ears. I have no body, but I come alive with the wind.",answer:"echo",options:["echo","whisper","ghost","silence","shadow"],hints:{[A.Inventor]:["The sphinx is known for asking about things we take for granted.","Think about what we hear in canyons."],[A.Stranger]:["The sphinx’s riddles are always a bit tricky.","I think this one is about something that bounces off walls."]}},{question:"I have cities, but no houses. I have mountains, but no trees. I have water, but no fish. What am I?",answer:"map",options:["map","globe","dream","photograph","landscape"],hints:{[A.Inventor]:["Think of something that represents the world, showing cities and mountains but not in a literal way."],[A.Stranger]:["Imagine something that can fit in your hand or hang on a wall, showing vast landscapes and bodies of water, but not in their true form."]}},{question:"I fly without wings. I cry without eyes. Whenever I go, darkness flies. What am I?",answer:"cloud",options:["cloud","bat","wind","shadow","storm"],hints:{[A.Inventor]:["The sphinx’s riddles can be twisted. Think about things that move or change without the usual parts, like wings or eyes."],[A.Stranger]:["Look at your surroundings. Shadows often behave in strange ways, don’t they?","They move, disappear, and seem to fly without wings."]}}];function Y(t){return t instanceof nl?q(t)%H.length:0}function K(t,e){const r=Y(t);return H[r].hints[e]}const Q={[A.Inventor]:[{messages:["I see you found the first gear. You should talk to the mayor to learn more about the old clock."],conditions:{hasItem:T.Gear1},onCompleted:t=>{t.quests.updateExistingQuest(P.ForestGear,!0),V(t.scene,O.TownNorth,!0)}},{messages:t=>K(t.scene,A.Inventor),conditions:{activeQuest:P.SphinxRiddle}},{messages:["Now that you have the wrench, you can fix the clock tower. You’ll need three gears to do it."],conditions:{hasItem:T.Wrench}},{messages:["The clock tower is the heart of our town, but it’s been broken for ages. I’ve got a wrench, but you’ll need three special gears to fix it.","You might find the others by helping the townsfolk."],onCompleted:t=>{t.journal.addEntry(E.FixTheClock),t.inventory.addItem(T.Wrench)}}],[A.Stranger]:[{messages:["Now that you have the first gear, I would talk to the inventor."],conditions:{hasItem:T.Gear1}},{messages:t=>K(t.scene,A.Stranger),conditions:{activeQuest:P.SphinxRiddle}},{messages:["I’ve heard rumors of a gear hidden deep in the Enchanted Forest. Beware of the forest’s creatures and traps.","One time I thought I saw an ancient being, but it ran away."],conditions:{hasItem:T.Wrench},onCompleted:t=>{t.quests.addQuest({id:P.ForestGear,completed:!1}),V(t.scene,O.TownEast,!0)}},{messages:["Who am I?","Eventually, you will learn."]}],[A.Sphinx]:[{messages:t=>function(t){const e=Y(t);return[H[e].question]}(t.scene),options:t=>function(t){const e=Y(t),r=[...H[e].options].sort((()=>Math.random()-.5));return r.push("I don’t know"),r}(t.scene),conditions:{activeQuest:P.SphinxRiddle},onSelected:(t,e,r)=>{t===function(t){const e=Y(t);return H[e].answer}(e.scene)?e.message.setDialog({messages:["That is correct. Well done, you may pass."],onCompleted:t=>{t.quests.updateExistingQuest(P.SphinxRiddle,!0),t.journal.addEntry(E.SphinxRiddleSolved)}},r):"I don’t know"===t?e.message.setDialog({messages:["Come back when you have an answer for me."]},r):e.message.setDialog({messages:["That is not correct. Do not return."]},r)}},{messages:["Welcome, brave soul. To pass, you must answer my riddle. You may only answer once. If you are unsure, you may speak to the townsfolk. Choose wisely."],onCompleted:t=>{t.quests.addQuest({id:P.SphinxRiddle,completed:!1})}}],[A.Mayor]:[{messages:["The minute hand on the clock is spinning again.","It looks like it’s missing two more gears.","The abandoned mansion west of the town might be a good place to look."],conditions:{journalEntry:E.ClockFirstGear}},{messages:["Did you go into the clock tower yet?"],conditions:{journalEntry:E.MetTheMayor}},{messages:["Hello, traveler. I am the mayor of this town. The clock tower has been broken for years.","Ah, I see you have found an old gear. Maybe it could be used to help fix the clock tower."],onCompleted:t=>{t.journal.addEntry(E.MetTheMayor),V(t.scene,O.ClockSquareNorth,!0)}}],[A.ClockTower]:[{messages:["The clock is partially moving again, but it is still missing two gears."],conditions:{journalEntry:E.ClockFirstGear}},{messages:["This dusty clock tower hasn't told the correct time in many years. It appears to be missing some gears.","Let’s see what happens when we add the first gear.","[CREAKING NOISE]","The clock tower is starting to partially move again. It looks like it’s missing two more gears."],conditions:{hasItem:T.Gear1},onCompleted:t=>{t.inventory.removeItem(T.Gear1),t.journal.addEntry(E.ClockFirstGear)}}]},J={[T.Gear1]:{messages:["Hmm, this gear looks like it belongs in the clock tower. I should ask the inventor about it."]}},X={[T.Wrench]:{x:150,y:650,image:"wrench",name:"Wrench"},[T.Gear1]:{x:5120,y:915,image:"gear",name:"Gear"}};class Z extends Phaser.Physics.Arcade.Sprite{constructor(t,r,n){const{x:o,y:i,image:s}=X[r];super(t,o,i,s),e(this,"itemType"),e(this,"player"),e(this,"particles"),e(this,"light"),t.add.existing(this),t.physics.add.existing(this),p.debug&&this.setInteractive({draggable:!0}),this.setScale(.35).setDepth(b.Items).setPipeline("Light2D"),this.itemType=r,this.player=n,this.particles=t.add.particles(o,i,"warp",{scale:{start:0,end:.9},alpha:{start:.8,end:0},delay:500,lifespan:1500,maxAliveParticles:1}),p.debug?this.light=new w(t,this.x,this.y,this.displayHeight/150*150,16764074,2):this.light=t.lights.addLight(this.x,this.y,this.displayHeight/150*150,16764074,2)}onInteract(t){return t[C.Continue]?(this.player.inventory.addItem(this.itemType),this.handleSideEffects(),this.destroy(),j.Item):j.None}destroy(t){var e,r;this.particles.destroy(),this.light instanceof w?this.light.destroy():null==(r=null==(e=this.scene)?void 0:e.lights)||r.removeLight(this.light),super.destroy(t)}getButtonPrompt(){return[`Pick Up ${T[this.itemType]}`,"Press [CONTINUE]"]}handleSideEffects(){const t=J[this.itemType];t&&this.player.message.setDialog(t,void 0,"player_portrait")}}class tt extends r.GameObjects.Text{constructor(t,e,r=3500){const n=20+50*$(t,tt).length;super(t,20,n,e,{...m,backgroundColor:"#"+f.Teal,padding:{x:10,y:5}}),this.setAlpha(0).setDepth(b.Ui).setScrollFactor(0),t.add.existing(this),t.add.tween({targets:this,alpha:1,scale:1.05,y:n+10,duration:350,hold:r,yoyo:!0,repeat:0,onComplete:()=>this.destroy()})}}class et extends r.GameObjects.Container{constructor(t){super(t,0,0),e(this,"inventory",[]),e(this,"text"),e(this,"rect"),this.setScrollFactor(0).setDepth(b.Ui).setVisible(!1),t.add.existing(this),this.rect=t.add.rectangle(0,0,0,0,d(f.Teal)).setStrokeStyle(2,d(f.White)).setAlpha(.75).setOrigin(0),this.add(this.rect),this.text=t.add.text(10,4,"Inventory",{...m,fontSize:32}),this.add(this.text)}addItem(t,e){this.inventory.push(t),this.add(this.scene.add.sprite(0,0,X[t].image).setScale(.35)),this.updateItems();const r=function(t,e){return $(t,Z).find((t=>t.itemType===e))}(this.scene,t);r&&r.destroy(),e||new tt(this.scene,`New item added: ${X[t].name}`)}removeItem(t){var e;const r=this.inventory.indexOf(t);r>-1&&(this.inventory.splice(r,1),null==(e=this.getAll().find((e=>{var r;return(null==(r=e.texture)?void 0:r.key)===X[t].image})))||e.destroy()),this.updateItems()}updateItems(){let t=0;this.getAll().forEach((e=>{if(e instanceof r.GameObjects.Sprite){const r=32+50*t;e.setPosition(r,68),t++}})),this.setVisible(this.inventory.length>0);const e=Math.max(this.text.displayWidth+18,50*t+12);this.setPosition(p.width-e-20,20),this.rect.setSize(e,102)}}class rt extends r.GameObjects.Sprite{constructor(t,r){super(t,p.width-50,p.height-55,"journal"),e(this,"player"),e(this,"journal",[]),e(this,"unread"),this.setScrollFactor(0).setDepth(b.Ui).setScale(.5).setAlpha(0).setInteractive({useHandCursor:!0}).setActive(!1),this.on("pointerdown",this.openJournal),t.add.existing(this),this.player=r,this.unread=t.add.ellipse(p.width-21,p.height-89,20,20,11141120).setStrokeStyle(2,d(f.Black)).setScrollFactor(0).setDepth(b.Ui2).setVisible(!1)}addEntry(t,e){this.journal.includes(t)||(0===this.journal.length&&(this.scene.tweens.add({targets:this,alpha:1,duration:300}),this.setActive(!0)),this.journal.push(t),e||(this.unread.setVisible(!0),new tt(this.scene,"New journal entry added!")),this.handleSideEffects(t,e||!1))}openJournal(){0!==this.journal.length&&(this.unread.setVisible(!1),this.scene.scene.pause(),this.scene.scene.launch("JournalDialog",{player:this.player}))}handleSideEffects(t,e){t===E.SphinxRiddleSolved&&W(this.scene,!0,e)}}const nt={[P.ForestGear]:"Find the gear in the forest",[P.SphinxRiddle]:"Solve the Sphinx riddle"};class ot extends r.GameObjects.Container{constructor(t){super(t,p.width-330-20,120),e(this,"quests",[]),e(this,"questRectangle"),t.add.existing(this),this.setScrollFactor(0).setDepth(b.Ui).setVisible(!1),this.questRectangle=t.add.rectangle(0,0,330,60,d(f.Teal)).setStrokeStyle(2,d(f.White)).setAlpha(.75).setOrigin(0),this.add(this.questRectangle),this.add(t.add.text(10,4,"Quests",{...m,fontSize:32}))}addQuest(t,e){this.quests.find((e=>e.id===t.id))||(this.quests.push(t),this.add(this.scene.add.text(0,0,nt[t.id],{...m,fontSize:20})),this.updateQuests(),e||new tt(this.scene,`New quest added: ${nt[t.id]}`))}updateExistingQuest(t,e){const r=this.quests.find((e=>e.id===t));r&&(!r.completed&&e&&new tt(this.scene,`Quest completed: ${nt[r.id]}`),r.completed=e),this.updateQuests()}updateQuests(){const t=this.quests.filter((t=>!t.completed));let e=1,n=0;this.getAll().forEach((o=>{if(o instanceof r.GameObjects.Text)if(t.find((t=>o.text===nt[t.id]))||"Quests"===o.text){if("Quests"!==o.text){const t=14+30*e;o.setPosition(10,t),e++,n=Math.max(n,o.width)}}else o.destroy()}));const o=n+20;this.setX(p.width-20-o),this.setY(this.scene.player.inventory.inventory.length>0?140:20),this.setVisible(t.length>0),this.questRectangle.setSize(o,50+30*t.length)}reset(){this.quests=[],this.updateQuests()}}class it extends r.GameObjects.Text{constructor(t){super(t,p.width/2,p.height-50,"",m),this.setOrigin(.5).setBackgroundColor("#"+f.Black).setPadding(10,5).setAlign("center").setAlpha(.9).setScrollFactor(0).setDepth(b.Overlay).setVisible(!1),t.add.existing(this)}}class st extends r.GameObjects.Text{constructor(t,r,n,o,i,s){super(t,r,n,o,{...m,fontSize:48,backgroundColor:`#${f.Teal}`,padding:{x:15,y:10},...s}),e(this,"onClick"),this.setOrigin(.5),t.add.existing(this),this.onClick=i,this.setInteractive({useHandCursor:!0}).setScrollFactor(0),this.on("pointerdown",(()=>i())),this.on("pointerover",(()=>this.setTint(12303291))),this.on("pointerout",(()=>this.setTint(16777215)))}}class at extends r.GameObjects.Container{constructor(t){var r,n,o;super(t),e(this,"buttons",[]),e(this,"activeIndex",-1),t.add.existing(this).setScrollFactor(0),null==(r=t.input.keyboard)||r.on("keydown-UP",(()=>{this.setActiveButton(Math.max(0,this.activeIndex-1))})),null==(n=t.input.keyboard)||n.on("keydown-DOWN",(()=>{this.setActiveButton(Math.min(this.activeIndex+1,this.buttons.length-1))})),null==(o=t.input.keyboard)||o.on("keydown-ENTER",(()=>{var t;null==(t=this.buttons[this.activeIndex])||t.onClick()}))}addButton(t){this.add(t),this.buttons.push(t),1===this.buttons.length&&this.setActiveButton(0)}setActiveButton(t){var e,r;null==(e=this.buttons[this.activeIndex])||e.setTint(16777215),this.activeIndex=t,null==(r=this.buttons[this.activeIndex])||r.setTint(d(f.Tan))}clearButtons(){this.buttons=[],this.activeIndex=-1,this.removeAll(!0)}}const lt=20,{width:ct,height:ht}=p,ut=ct-130-80;class pt extends r.GameObjects.Container{constructor(t,n){var o,i;super(t),e(this,"player"),e(this,"npc"),e(this,"npcName"),e(this,"text"),e(this,"box"),e(this,"image"),e(this,"options"),e(this,"optionsContainer"),e(this,"dialog"),e(this,"messageIndex"),e(this,"interactionTimeout"),t.add.existing(this),this.setScrollFactor(0),this.setPosition(lt,ht-lt-170),this.setDepth(b.Overlay),this.setVisible(!1),this.player=n,this.npcName=new r.GameObjects.Text(t,170,15,"",{...m,color:"#"+f.Tan}),this.text=new r.GameObjects.Text(t,170,60,"",m),this.text.width=ut,this.text.height=130,this.text.setOrigin(0).setMaxLines(3),this.image=new r.GameObjects.Image(t,lt,lt,"").setOrigin(0).setScale(1.5),this.box=new r.GameObjects.Rectangle(t,0,0,ct-40,170,d(f.Black),.8),this.box.setStrokeStyle(2,d(f.Tan),1),this.box.setOrigin(0,0),this.optionsContainer=new at(t).setDepth(b.Overlay),this.add([this.box,this.npcName,this.text,this.image]),null==(o=this.scene.input.keyboard)||o.on("keydown-ENTER",(()=>{this.options||this.updateDialog()})),null==(i=this.scene.input.keyboard)||i.on("keydown-BACKSPACE",(()=>{this.options||this.updateDialog()}))}setDialog(t,e,r){this.setVisible(void 0!==t),this.npc=e,this.messageIndex=0,this.dialog=t,this.interactionTimeout=Date.now()+350,this.scene.gamepad.offsetButtons(void 0!==this.dialog),t&&(this.npcName.setVisible(!1),e||r?(e&&(this.npcName.setVisible(!0),this.npcName.setText(F[e.npcType].name)),this.image.setVisible(!0),e?this.image.setTexture(F[e.npcType].portrait):r&&this.image.setTexture(r),this.text.setPosition(170,lt+(e?40:0)).setWordWrapWidth(ut,!0).setFixedSize(ut,130)):(this.image.setVisible(!1),this.text.setPosition(lt,lt).setWordWrapWidth(170+ut,!0).setFixedSize(170+ut,130)),this.showMessage())}showMessage(){const t=this.getMessages(),e=t&&t[this.messageIndex];e&&(this.text.setText(e),this.text.getWrappedText().length>3&&console.error("Message too long!",e)),this.updateOptions()}updateOptions(){if(this.optionsContainer.clearButtons(),this.options=this.getOptions(),!this.options)return;const t=!p.zoomed;this.options.forEach(((e,r)=>{const n=new st(this.scene,p.width/2,p.height/(t?9:14)+r*(30+p.height/(t?16:22)),e,(()=>this.onSelectOption(e)),{fontSize:24,backgroundColor:"#"+f.Black,padding:{y:10},align:"center",fixedWidth:350}).setOrigin(.5).setDepth(b.Overlay);this.optionsContainer.addButton(n)}))}onSelectOption(t){var e;(null==(e=this.dialog)?void 0:e.onSelected)&&(this.dialog.onSelected(t,this.player,this.npc),this.optionsContainer.removeAll(!0))}updateDialog(){if(Date.now()<this.interactionTimeout)return;const t=this.getMessages();this.dialog&&t&&(this.messageIndex++,this.messageIndex>=t.length?(this.dialog.onCompleted&&this.dialog.onCompleted(this.player,this.npc),this.dialog=void 0,this.setVisible(!1)):this.showMessage(),this.scene.gamepad.offsetButtons(void 0!==this.dialog),this.interactionTimeout=Date.now()+350)}getMessages(){var t;let e=null==(t=this.dialog)?void 0:t.messages;return"function"==typeof e&&(e=e(this.player)),e}getOptions(){var t;let e=null==(t=this.dialog)?void 0:t.options;return"function"==typeof e&&(e=e(this.player)),e}}const yt=1.35*(p.fastMode?350:120),ft=new r.Math.Vector2(400,650);class dt extends Phaser.Physics.Arcade.Sprite{constructor(t){var r;super(t,ft.x,ft.y,"character",0),e(this,"keys"),e(this,"light"),e(this,"buttonPrompt"),e(this,"interactive"),e(this,"interactionTimeout",0),e(this,"message"),e(this,"inventory"),e(this,"quests"),e(this,"journal"),e(this,"counter",0),e(this,"history",[]),e(this,"rewinding",!1),t.add.existing(this),t.physics.add.existing(this),p.debug&&this.setInteractive(),this.setBodySize(48,70).setOffset(40,10).setOrigin(.5,.65).setDepth(b.Player).setScale(1.35).setPipeline("Light2D"),p.debug?this.light=new w(t,this.x,this.y,250,16768443,1):this.light=t.lights.addLight(this.x,this.y,250,16768443,1),(r=this).anims.create({key:"walk",frames:r.anims.generateFrameNumbers("character",{start:0,end:5}),frameRate:4,repeat:-1}),r.anims.play("walk"),this.keys=new M(t),this.buttonPrompt=new it(t),this.message=new pt(t,this),this.inventory=new et(t),this.quests=new ot(t),this.journal=new rt(t,this)}update(t,e){p.debug&&this.setTint(this.interactive?16755370:16777215),this.buttonPrompt.setVisible(this.interactive&&!this.message.visible&&this.buttonPrompt.text.length>0||!1),this.setVelocity(0),this.rewinding?this.counter+e>31.25?(this.rewind(),this.counter=0):this.counter+=e:this.checkInteraction()||this.message.visible||this.updateVelocity(),this.light.setPosition(this.x,this.y),function(t){var e;const r=(null==(e=t.body)?void 0:e.velocity.x)||0,n=r<0;Math.abs(r)>0?(t.anims.resume(),t.flipX=t.rewinding?!n:n):t.anims.pause(),t.setAngle(t.flipX?-5:5)}(this)}checkInteraction(){let t;return this.interactive&&Date.now()>this.interactionTimeout&&(t=this.interactive.onInteract(this.keys.keys),t!==j.None&&(this.interactionTimeout=Date.now()+(this.interactive.interactionTimeout||500),this.keys.resetKeys(),t===j.Teleported&&(this.interactive=void 0))),t}updateVelocity(){let t=yt;const e=this.keys.keys;e[C.Left]&&this.setVelocityX(-t),e[C.Right]&&this.setVelocityX(t),p.debug&&!this.interactive&&(e[C.Up]&&this.setVelocityY(-t),e[C.Down]&&this.setVelocityY(t)),e[C.Left]&&e[C.Right]&&this.setVelocityX(0)}record(){var t;this.history.length<1e3?this.history.push(new Phaser.Math.Vector3(this.x,this.y,(null==(t=this.body)?void 0:t.velocity.x)||0)):console.warn("Max history reached")}rewind(){const t=this.history.pop();t&&(this.x=t.x,this.y=t.y,this.setVelocityX(-t.z))}setRewind(t){this.rewinding=t,this.counter=0}reset(){this.quests.reset(),this.setPosition(ft.x,ft.y),this.flipX=!1,this.setVelocity(0)}setInteractiveObject(t){var e;this.interactive=t,this.buttonPrompt.setText((null==(e=null==t?void 0:t.getButtonPrompt)?void 0:e.call(t))||"")}}class gt extends r.Physics.Arcade.Image{constructor(t,r,n,o=100,i=100){if(super(t,r,n,""),e(this,"width"),e(this,"height"),t.add.existing(this),t.physics.add.existing(this),this.scene=t,this.width=o,this.height=i,this.setOrigin(0),this.setVisible(!1),this.setSize(o,1.5*i),p.debug){const e=t.add.graphics();e.lineStyle(2,65280,1);const s=o/2;e.lineBetween(r,n+i,r+o,n),e.lineBetween(r,n+i,r-s,n+i),e.lineBetween(r+o,n,r+o+s,n),e.strokeCircle(r+o,n,2),e.strokeCircle(r,n+i,2)}}update(t,e){const n=this.scene.player;if(this.body&&this.scene.physics.world.intersects(this.body,n.body)){const t=r.Math.Clamp(1-(this.x+this.width-n.x)/this.width,0,1),e=this.y+this.height,o=(1-n.originY)*n.displayHeight,i=e-this.height*t-o;n.setY(i)}}}const mt=1200;let bt=!1;function vt(t){return g(t.lights.ambientColor)===d(f.White)}function wt(t,e=!0){bt||(xt(t,f.White,e),t.lights.lights.forEach((r=>{const n=r.intensity;e?t.tweens.add({targets:r,duration:mt,intensity:0,onComplete:()=>{r.setVisible(!1),r.setIntensity(n)}}):r.setVisible(!1)})))}function xt(t,e,n){if(!n)return void t.lights.setAmbientColor(d(e));bt=!0;const o=g(t.lights.ambientColor),i=r.Display.Color.ValueToColor(o),s=r.Display.Color.ValueToColor(e);t.tweens.addCounter({from:0,to:100,duration:mt,onUpdate:e=>{const n=r.Display.Color.Interpolate.ColorWithColor(i,s,100,e.getValue());var o;t.lights.setAmbientColor((o=n,d(r.Display.Color.RGBToString(o.r,o.g,o.b))))},onComplete:()=>{bt=!1}})}var St,kt,jt=Object.prototype.toString,Ot=function(t){var e=jt.call(t),r="[object Arguments]"===e;return r||(r="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===jt.call(t.callee)),r},Tt=Array.prototype.slice,Pt=Ot,At=Object.keys,It=At?function(t){return At(t)}:function(){if(kt)return St;var t;if(kt=1,!Object.keys){var e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Ot,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),s=o.call((function(){}),"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(t){var e=t.constructor;return e&&e.prototype===t},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!c["$"+t]&&e.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{l(window[t])}catch(r){return!0}}catch(r){return!0}return!1}();t=function(t){var o=null!==t&&"object"==typeof t,c="[object Function]"===r.call(t),u=n(t),p=o&&"[object String]"===r.call(t),y=[];if(!o&&!c&&!u)throw new TypeError("Object.keys called on a non-object");var f=s&&c;if(p&&t.length>0&&!e.call(t,0))for(var d=0;d<t.length;++d)y.push(String(d));if(u&&t.length>0)for(var g=0;g<t.length;++g)y.push(String(g));else for(var m in t)f&&"prototype"===m||!e.call(t,m)||y.push(String(m));if(i)for(var b=function(t){if("undefined"==typeof window||!h)return l(t);try{return l(t)}catch(e){return!1}}(t),v=0;v<a.length;++v)b&&"constructor"===a[v]||!e.call(t,a[v])||y.push(a[v]);return y}}return St=t}(),Et=Object.keys;It.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return Pt(t)?Et(Tt.call(t)):Et(t)})}else Object.keys=It;return Object.keys||It};var Ct,Mt=It,Ft=Error,Dt=EvalError,Bt=RangeError,Rt=ReferenceError,Gt=SyntaxError,Nt=TypeError,Lt=URIError,Wt=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0},Ut="undefined"!=typeof Symbol&&Symbol,_t=Wt,zt=function(){return"function"==typeof Ut&&"function"==typeof Symbol&&"symbol"==typeof Ut("foo")&&"symbol"==typeof Symbol("bar")&&_t()},$t={__proto__:null,foo:{}},Vt=Object,qt=Object.prototype.toString,Ht=Math.max,Yt=function(t,e){for(var r=[],n=0;n<t.length;n+=1)r[n]=t[n];for(var o=0;o<e.length;o+=1)r[o+t.length]=e[o];return r},Kt=Function.prototype.bind||function(t){var e=this;if("function"!=typeof e||"[object Function]"!==qt.apply(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r,n=function(t,e){for(var r=[],n=1,o=0;n<t.length;n+=1,o+=1)r[o]=t[n];return r}(arguments),o=Ht(0,e.length-n.length),i=[],s=0;s<o;s++)i[s]="$"+s;if(r=Function("binder","return function ("+function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=",");return r}(i)+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof r){var o=e.apply(this,Yt(n,arguments));return Object(o)===o?o:this}return e.apply(t,Yt(n,arguments))})),e.prototype){var a=function(){};a.prototype=e.prototype,r.prototype=new a,a.prototype=null}return r},Qt=Function.prototype.call,Jt=Object.prototype.hasOwnProperty,Xt=Kt.call(Qt,Jt),Zt=Ft,te=Dt,ee=Bt,re=Rt,ne=Gt,oe=Nt,ie=Lt,se=Function,ae=function(t){try{return se('"use strict"; return ('+t+").constructor;")()}catch(e){}},le=Object.getOwnPropertyDescriptor;if(le)try{le({},"")}catch(xl){le=null}var ce=function(){throw new oe},he=le?function(){try{return ce}catch(t){try{return le(arguments,"callee").get}catch(e){return ce}}}():ce,ue=zt(),pe={__proto__:$t}.foo===$t.foo&&!($t instanceof Vt),ye=Object.getPrototypeOf||(pe?function(t){return t.__proto__}:null),fe={},de="undefined"!=typeof Uint8Array&&ye?ye(Uint8Array):Ct,ge={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?Ct:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?Ct:ArrayBuffer,"%ArrayIteratorPrototype%":ue&&ye?ye([][Symbol.iterator]()):Ct,"%AsyncFromSyncIteratorPrototype%":Ct,"%AsyncFunction%":fe,"%AsyncGenerator%":fe,"%AsyncGeneratorFunction%":fe,"%AsyncIteratorPrototype%":fe,"%Atomics%":"undefined"==typeof Atomics?Ct:Atomics,"%BigInt%":"undefined"==typeof BigInt?Ct:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?Ct:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?Ct:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?Ct:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Zt,"%eval%":eval,"%EvalError%":te,"%Float32Array%":"undefined"==typeof Float32Array?Ct:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?Ct:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?Ct:FinalizationRegistry,"%Function%":se,"%GeneratorFunction%":fe,"%Int8Array%":"undefined"==typeof Int8Array?Ct:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?Ct:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?Ct:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ue&&ye?ye(ye([][Symbol.iterator]())):Ct,"%JSON%":"object"==typeof JSON?JSON:Ct,"%Map%":"undefined"==typeof Map?Ct:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&ue&&ye?ye((new Map)[Symbol.iterator]()):Ct,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?Ct:Promise,"%Proxy%":"undefined"==typeof Proxy?Ct:Proxy,"%RangeError%":ee,"%ReferenceError%":re,"%Reflect%":"undefined"==typeof Reflect?Ct:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?Ct:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&ue&&ye?ye((new Set)[Symbol.iterator]()):Ct,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?Ct:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ue&&ye?ye(""[Symbol.iterator]()):Ct,"%Symbol%":ue?Symbol:Ct,"%SyntaxError%":ne,"%ThrowTypeError%":he,"%TypedArray%":de,"%TypeError%":oe,"%Uint8Array%":"undefined"==typeof Uint8Array?Ct:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?Ct:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?Ct:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?Ct:Uint32Array,"%URIError%":ie,"%WeakMap%":"undefined"==typeof WeakMap?Ct:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?Ct:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?Ct:WeakSet};if(ye)try{null.error}catch(xl){var me=ye(ye(xl));ge["%Error.prototype%"]=me}var be=function t(e){var r;if("%AsyncFunction%"===e)r=ae("async function () {}");else if("%GeneratorFunction%"===e)r=ae("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=ae("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&ye&&(r=ye(o.prototype))}return ge[e]=r,r},ve={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},we=Kt,xe=Xt,Se=we.call(Function.call,Array.prototype.concat),ke=we.call(Function.apply,Array.prototype.splice),je=we.call(Function.call,String.prototype.replace),Oe=we.call(Function.call,String.prototype.slice),Te=we.call(Function.call,RegExp.prototype.exec),Pe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ae=/\\(\\)?/g,Ie=function(t,e){var r,n=t;if(xe(ve,n)&&(n="%"+(r=ve[n])[0]+"%"),xe(ge,n)){var o=ge[n];if(o===fe&&(o=be(n)),void 0===o&&!e)throw new oe("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new ne("intrinsic "+t+" does not exist!")},Ee=function(t,e){if("string"!=typeof t||0===t.length)throw new oe("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new oe('"allowMissing" argument must be a boolean');if(null===Te(/^%?[^%]*%?$/,t))throw new ne("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=Oe(t,0,1),r=Oe(t,-1);if("%"===e&&"%"!==r)throw new ne("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new ne("invalid intrinsic syntax, expected opening `%`");var n=[];return je(t,Pe,(function(t,e,r,o){n[n.length]=r?je(o,Ae,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",o=Ie("%"+n+"%",e),i=o.name,s=o.value,a=!1,l=o.alias;l&&(n=l[0],ke(r,Se([0,1],l)));for(var c=1,h=!0;c<r.length;c+=1){var u=r[c],p=Oe(u,0,1),y=Oe(u,-1);if(('"'===p||"'"===p||"`"===p||'"'===y||"'"===y||"`"===y)&&p!==y)throw new ne("property names with quotes must have matching quotes");if("constructor"!==u&&h||(a=!0),xe(ge,i="%"+(n+="."+u)+"%"))s=ge[i];else if(null!=s){if(!(u in s)){if(!e)throw new oe("base intrinsic for "+t+" exists, but the property is not available.");return}if(le&&c+1>=r.length){var f=le(s,u);s=(h=!!f)&&"get"in f&&!("originalValue"in f.get)?f.get:s[u]}else h=xe(s,u),s=s[u];h&&!a&&(ge[i]=s)}}return s},Ce=Ee("%Object.defineProperty%",!0)||!1;if(Ce)try{Ce({},"a",{value:1})}catch(xl){Ce=!1}var Me=Ce,Fe=Ee("%Object.getOwnPropertyDescriptor%",!0);if(Fe)try{Fe([],"length")}catch(xl){Fe=null}var De=Fe,Be=Me,Re=Gt,Ge=Nt,Ne=De,Le=function(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new Ge("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new Ge("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new Ge("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new Ge("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new Ge("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new Ge("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,i=arguments.length>5?arguments[5]:null,s=arguments.length>6&&arguments[6],a=!!Ne&&Ne(t,e);if(Be)Be(t,e,{configurable:null===i&&a?a.configurable:!i,enumerable:null===n&&a?a.enumerable:!n,value:r,writable:null===o&&a?a.writable:!o});else{if(!s&&(n||o||i))throw new Re("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=r}},We=Me,Ue=function(){return!!We};Ue.hasArrayLengthDefineBug=function(){if(!We)return null;try{return 1!==We([],"length",{value:1}).length}catch(xl){return!0}};var _e=Ue,ze=Mt,$e="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Ve=Object.prototype.toString,qe=Array.prototype.concat,He=Le,Ye=_e(),Ke=function(t,e,r,n){if(e in t)if(!0===n){if(t[e]===r)return}else if("function"!=typeof(o=n)||"[object Function]"!==Ve.call(o)||!n())return;var o;Ye?He(t,e,r,!0):He(t,e,r)},Qe=function(t,e){var r=arguments.length>2?arguments[2]:{},n=ze(e);$e&&(n=qe.call(n,Object.getOwnPropertySymbols(e)));for(var o=0;o<n.length;o+=1)Ke(t,n[o],e[n[o]],r[n[o]])};Qe.supportsDescriptors=!!Ye;var Je=Qe,Xe={exports:{}},Ze=Ee,tr=Le,er=_e(),rr=De,nr=Nt,or=Ze("%Math.floor%"),ir=function(t,e){if("function"!=typeof t)throw new nr("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||or(e)!==e)throw new nr("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,o=!0;if("length"in t&&rr){var i=rr(t,"length");i&&!i.configurable&&(n=!1),i&&!i.writable&&(o=!1)}return(n||o||!r)&&(er?tr(t,"length",e,!0,!0):tr(t,"length",e)),t};!function(t){var e=Kt,r=Ee,n=ir,o=Nt,i=r("%Function.prototype.apply%"),s=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(s,i),l=Me,c=r("%Math.max%");t.exports=function(t){if("function"!=typeof t)throw new o("a function is required");var r=a(e,s,arguments);return n(r,1+c(0,t.length-(arguments.length-1)),!0)};var h=function(){return a(e,i,arguments)};l?l(t.exports,"apply",{value:h}):t.exports.apply=h}(Xe);var sr=Xe.exports,ar=Ee,lr=sr,cr=lr(ar("String.prototype.indexOf")),hr=function(t,e){var r=ar(t,!!e);return"function"==typeof r&&cr(t,".prototype.")>-1?lr(r):r},ur=Mt,pr=Wt(),yr=hr,fr=Object,dr=yr("Array.prototype.push"),gr=yr("Object.prototype.propertyIsEnumerable"),mr=pr?Object.getOwnPropertySymbols:null,br=function(t,e){if(null==t)throw new TypeError("target must be an object");var r=fr(t);if(1===arguments.length)return r;for(var n=1;n<arguments.length;++n){var o=fr(arguments[n]),i=ur(o),s=pr&&(Object.getOwnPropertySymbols||mr);if(s)for(var a=s(o),l=0;l<a.length;++l){var c=a[l];gr(o,c)&&dr(i,c)}for(var h=0;h<i.length;++h){var u=i[h];if(gr(o,u)){var p=o[u];r[u]=p}}}return r},vr=br,wr=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),r={},n=0;n<e.length;++n)r[e[n]]=e[n];var o=Object.assign({},r),i="";for(var s in o)i+=s;return t!==i}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(xl){return"y"===t[1]}return!1}()?vr:Object.assign:vr},xr=Je,Sr=wr,kr=Je,jr=br,Or=wr,Tr=sr.apply(Or()),Pr=function(t,e){return Tr(Object,arguments)};kr(Pr,{getPolyfill:Or,implementation:jr,shim:function(){var t=Sr();return xr(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}});var Ar=Pr,Ir=function(){return"string"==typeof function(){}.name},Er=Object.getOwnPropertyDescriptor;if(Er)try{Er([],"length")}catch(xl){Er=null}Ir.functionsHaveConfigurableNames=function(){if(!Ir()||!Er)return!1;var t=Er((function(){}),"name");return!!t&&!!t.configurable};var Cr=Function.prototype.bind;Ir.boundFunctionsHaveNames=function(){return Ir()&&"function"==typeof Cr&&""!==function(){}.bind().name};var Mr=Ir,Fr=Le,Dr=_e(),Br=Mr.functionsHaveConfigurableNames(),Rr=Nt,Gr=Nt,Nr=Object,Lr=function(t,e){if("function"!=typeof t)throw new Rr("`fn` is not a function");return arguments.length>2&&!!arguments[2]&&!Br||(Dr?Fr(t,"name",e,!0,!0):Fr(t,"name",e)),t}((function(){if(null==this||this!==Nr(this))throw new Gr("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t}),"get flags",!0),Wr=Lr,Ur=Je.supportsDescriptors,_r=Object.getOwnPropertyDescriptor,zr=function(){if(Ur&&"gim"===/a/gim.flags){var t=_r(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",r={};if(Object.defineProperty(r,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(r,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return Wr},$r=Je.supportsDescriptors,Vr=zr,qr=Object.getOwnPropertyDescriptor,Hr=Object.defineProperty,Yr=TypeError,Kr=Object.getPrototypeOf,Qr=/a/,Jr=Je,Xr=Lr,Zr=zr,tn=sr(Zr());Jr(tn,{getPolyfill:Zr,implementation:Xr,shim:function(){if(!$r||!Kr)throw new Yr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=Vr(),e=Kr(Qr),r=qr(e,"flags");return r&&r.get===t||Hr(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}});var en=tn,rn={exports:{}},nn=Wt,on=function(){return nn()&&!!Symbol.toStringTag},sn=on(),an=hr("Object.prototype.toString"),ln=function(t){return!(sn&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===an(t)},cn=function(t){return!!ln(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==an(t)&&"[object Function]"===an(t.callee)},hn=function(){return ln(arguments)}();ln.isLegacyArguments=cn;var un=hn?ln:cn;const pn=n(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var yn="function"==typeof Map&&Map.prototype,fn=Object.getOwnPropertyDescriptor&&yn?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,dn=yn&&fn&&"function"==typeof fn.get?fn.get:null,gn=yn&&Map.prototype.forEach,mn="function"==typeof Set&&Set.prototype,bn=Object.getOwnPropertyDescriptor&&mn?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,vn=mn&&bn&&"function"==typeof bn.get?bn.get:null,wn=mn&&Set.prototype.forEach,xn="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,Sn="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,kn="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,jn=Boolean.prototype.valueOf,On=Object.prototype.toString,Tn=Function.prototype.toString,Pn=String.prototype.match,An=String.prototype.slice,In=String.prototype.replace,En=String.prototype.toUpperCase,Cn=String.prototype.toLowerCase,Mn=RegExp.prototype.test,Fn=Array.prototype.concat,Dn=Array.prototype.join,Bn=Array.prototype.slice,Rn=Math.floor,Gn="function"==typeof BigInt?BigInt.prototype.valueOf:null,Nn=Object.getOwnPropertySymbols,Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Wn="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Un="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,_n=Object.prototype.propertyIsEnumerable,zn=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function $n(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||Mn.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var n=t<0?-Rn(-t):Rn(t);if(n!==t){var o=String(n),i=An.call(e,o.length+1);return In.call(o,r,"$&_")+"."+In.call(In.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return In.call(e,r,"$&_")}var Vn=pn,qn=Vn.custom,Hn=Xn(qn)?qn:null;function Yn(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function Kn(t){return In.call(String(t),/"/g,"&quot;")}function Qn(t){return!("[object Array]"!==eo(t)||Un&&"object"==typeof t&&Un in t)}function Jn(t){return!("[object RegExp]"!==eo(t)||Un&&"object"==typeof t&&Un in t)}function Xn(t){if(Wn)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!Ln)return!1;try{return Ln.call(t),!0}catch(xl){}return!1}var Zn=Object.prototype.hasOwnProperty||function(t){return t in this};function to(t,e){return Zn.call(t,e)}function eo(t){return On.call(t)}function ro(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function no(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return no(An.call(t,0,e.maxStringLength),e)+n}return Yn(In.call(In.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,oo),"single",e)}function oo(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+En.call(e.toString(16))}function io(t){return"Object("+t+")"}function so(t){return t+" { ? }"}function ao(t,e,r,n){return t+" ("+e+") {"+(n?lo(r,n):Dn.call(r,", "))+"}"}function lo(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+Dn.call(t,","+r)+"\n"+e.prev}function co(t,e){var r=Qn(t),n=[];if(r){n.length=t.length;for(var o=0;o<t.length;o++)n[o]=to(t,o)?e(t[o],t):""}var i,s="function"==typeof Nn?Nn(t):[];if(Wn){i={};for(var a=0;a<s.length;a++)i["$"+s[a]]=s[a]}for(var l in t)to(t,l)&&(r&&String(Number(l))===l&&l<t.length||Wn&&i["$"+l]instanceof Symbol||(Mn.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if("function"==typeof Nn)for(var c=0;c<s.length;c++)_n.call(t,s[c])&&n.push("["+e(s[c])+"]: "+e(t[s[c]],t));return n}var ho=Ee,uo=hr,po=function t(e,r,n,i){var s=r||{};if(to(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(to(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!to(s,"customInspect")||s.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(to(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(to(s,"numericSeparator")&&"boolean"!=typeof s.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=s.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return no(e,s);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var c=String(e);return l?$n(e,c):c}if("bigint"==typeof e){var h=String(e)+"n";return l?$n(e,h):h}var u=void 0===s.depth?5:s.depth;if(void 0===n&&(n=0),n>=u&&u>0&&"object"==typeof e)return Qn(e)?"[Array]":"[Object]";var p,y=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"==typeof t.indent&&t.indent>0))return null;r=Dn.call(Array(t.indent+1)," ")}return{base:r,prev:Dn.call(Array(e+1),r)}}(s,n);if(void 0===i)i=[];else if(ro(i,e)>=0)return"[Circular]";function f(e,r,o){if(r&&(i=Bn.call(i)).push(r),o){var a={depth:s.depth};return to(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),t(e,a,n+1,i)}return t(e,s,n+1,i)}if("function"==typeof e&&!Jn(e)){var d=function(t){if(t.name)return t.name;var e=Pn.call(Tn.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}(e),g=co(e,f);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(g.length>0?" { "+Dn.call(g,", ")+" }":"")}if(Xn(e)){var m=Wn?In.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Ln.call(e);return"object"!=typeof e||Wn?m:io(m)}if((p=e)&&"object"==typeof p&&("undefined"!=typeof HTMLElement&&p instanceof HTMLElement||"string"==typeof p.nodeName&&"function"==typeof p.getAttribute)){for(var b="<"+Cn.call(String(e.nodeName)),v=e.attributes||[],w=0;w<v.length;w++)b+=" "+v[w].name+"="+Yn(Kn(v[w].value),"double",s);return b+=">",e.childNodes&&e.childNodes.length&&(b+="..."),b+"</"+Cn.call(String(e.nodeName))+">"}if(Qn(e)){if(0===e.length)return"[]";var x=co(e,f);return y&&!function(t){for(var e=0;e<t.length;e++)if(ro(t[e],"\n")>=0)return!1;return!0}(x)?"["+lo(x,y)+"]":"[ "+Dn.call(x,", ")+" ]"}if(function(t){return!("[object Error]"!==eo(t)||Un&&"object"==typeof t&&Un in t)}(e)){var S=co(e,f);return"cause"in Error.prototype||!("cause"in e)||_n.call(e,"cause")?0===S.length?"["+String(e)+"]":"{ ["+String(e)+"] "+Dn.call(S,", ")+" }":"{ ["+String(e)+"] "+Dn.call(Fn.call("[cause]: "+f(e.cause),S),", ")+" }"}if("object"==typeof e&&a){if(Hn&&"function"==typeof e[Hn]&&Vn)return Vn(e,{depth:u-n});if("symbol"!==a&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!dn||!t||"object"!=typeof t)return!1;try{dn.call(t);try{vn.call(t)}catch(b){return!0}return t instanceof Map}catch(xl){}return!1}(e)){var k=[];return gn&&gn.call(e,(function(t,r){k.push(f(r,e,!0)+" => "+f(t,e))})),ao("Map",dn.call(e),k,y)}if(function(t){if(!vn||!t||"object"!=typeof t)return!1;try{vn.call(t);try{dn.call(t)}catch(e){return!0}return t instanceof Set}catch(xl){}return!1}(e)){var j=[];return wn&&wn.call(e,(function(t){j.push(f(t,e))})),ao("Set",vn.call(e),j,y)}if(function(t){if(!xn||!t||"object"!=typeof t)return!1;try{xn.call(t,xn);try{Sn.call(t,Sn)}catch(b){return!0}return t instanceof WeakMap}catch(xl){}return!1}(e))return so("WeakMap");if(function(t){if(!Sn||!t||"object"!=typeof t)return!1;try{Sn.call(t,Sn);try{xn.call(t,xn)}catch(b){return!0}return t instanceof WeakSet}catch(xl){}return!1}(e))return so("WeakSet");if(function(t){if(!kn||!t||"object"!=typeof t)return!1;try{return kn.call(t),!0}catch(xl){}return!1}(e))return so("WeakRef");if(function(t){return!("[object Number]"!==eo(t)||Un&&"object"==typeof t&&Un in t)}(e))return io(f(Number(e)));if(function(t){if(!t||"object"!=typeof t||!Gn)return!1;try{return Gn.call(t),!0}catch(xl){}return!1}(e))return io(f(Gn.call(e)));if(function(t){return!("[object Boolean]"!==eo(t)||Un&&"object"==typeof t&&Un in t)}(e))return io(jn.call(e));if(function(t){return!("[object String]"!==eo(t)||Un&&"object"==typeof t&&Un in t)}(e))return io(f(String(e)));if("undefined"!=typeof window&&e===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&e===globalThis||void 0!==o&&e===o)return"{ [object globalThis] }";if(!function(t){return!("[object Date]"!==eo(t)||Un&&"object"==typeof t&&Un in t)}(e)&&!Jn(e)){var O=co(e,f),T=zn?zn(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",A=!T&&Un&&Object(e)===e&&Un in e?An.call(eo(e),8,-1):P?"Object":"",I=(T||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(A||P?"["+Dn.call(Fn.call([],A||[],P||[]),": ")+"] ":"");return 0===O.length?I+"{}":y?I+"{"+lo(O,y)+"}":I+"{ "+Dn.call(O,", ")+" }"}return String(e)},yo=Nt,fo=ho("%WeakMap%",!0),go=ho("%Map%",!0),mo=uo("WeakMap.prototype.get",!0),bo=uo("WeakMap.prototype.set",!0),vo=uo("WeakMap.prototype.has",!0),wo=uo("Map.prototype.get",!0),xo=uo("Map.prototype.set",!0),So=uo("Map.prototype.has",!0),ko=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},jo=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new yo("Side channel does not contain "+po(t))},get:function(n){if(fo&&n&&("object"==typeof n||"function"==typeof n)){if(t)return mo(t,n)}else if(go){if(e)return wo(e,n)}else if(r)return function(t,e){var r=ko(t,e);return r&&r.value}(r,n)},has:function(n){if(fo&&n&&("object"==typeof n||"function"==typeof n)){if(t)return vo(t,n)}else if(go){if(e)return So(e,n)}else if(r)return function(t,e){return!!ko(t,e)}(r,n);return!1},set:function(n,o){fo&&n&&("object"==typeof n||"function"==typeof n)?(t||(t=new fo),bo(t,n,o)):go?(e||(e=new go),xo(e,n,o)):(r||(r={key:{},next:null}),function(t,e,r){var n=ko(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,o))}};return n},Oo=Xt,To=jo(),Po=Nt,Ao={assert:function(t,e){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new Po("`O` is not an object");if("string"!=typeof e)throw new Po("`slot` must be a string");if(To.assert(t),!Ao.has(t,e))throw new Po("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new Po("`O` is not an object");if("string"!=typeof e)throw new Po("`slot` must be a string");var r=To.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new Po("`O` is not an object");if("string"!=typeof e)throw new Po("`slot` must be a string");var r=To.get(t);return!!r&&Oo(r,"$"+e)},set:function(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new Po("`O` is not an object");if("string"!=typeof e)throw new Po("`slot` must be a string");var n=To.get(t);n||(n={},To.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(Ao);var Io,Eo=Ao,Co=SyntaxError,Mo="object"==typeof StopIteration?StopIteration:null,Fo={}.toString,Do=Array.isArray||function(t){return"[object Array]"==Fo.call(t)},Bo=String.prototype.valueOf,Ro=Object.prototype.toString,Go=on(),No=function(t){return"string"==typeof t||"object"==typeof t&&(Go?function(t){try{return Bo.call(t),!0}catch(xl){return!1}}(t):"[object String]"===Ro.call(t))},Lo="function"==typeof Map&&Map.prototype?Map:null,Wo="function"==typeof Set&&Set.prototype?Set:null;Lo||(Io=function(t){return!1});var Uo=Lo?Map.prototype.has:null,_o=Wo?Set.prototype.has:null;Io||Uo||(Io=function(t){return!1});var zo,$o=Io||function(t){if(!t||"object"!=typeof t)return!1;try{if(Uo.call(t),_o)try{_o.call(t)}catch(xl){return!0}return t instanceof Lo}catch(xl){}return!1},Vo="function"==typeof Map&&Map.prototype?Map:null,qo="function"==typeof Set&&Set.prototype?Set:null;qo||(zo=function(t){return!1});var Ho=Vo?Map.prototype.has:null,Yo=qo?Set.prototype.has:null;zo||Yo||(zo=function(t){return!1});var Ko=zo||function(t){if(!t||"object"!=typeof t)return!1;try{if(Yo.call(t),Ho)try{Ho.call(t)}catch(xl){return!0}return t instanceof qo}catch(xl){}return!1},Qo=un,Jo=function(t){if(!Mo)throw new Co("this environment lacks StopIteration");Eo.set(t,"[[Done]]",!1);var e={next:function(){var t=Eo.get(this,"[[Iterator]]"),e=Eo.get(t,"[[Done]]");try{return{done:e,value:e?void 0:t.next()}}catch(xl){if(Eo.set(t,"[[Done]]",!0),xl!==Mo)throw xl;return{done:!0,value:void 0}}}};return Eo.set(e,"[[Iterator]]",t),e};if(zt()||Wt()){var Xo=Symbol.iterator;rn.exports=function(t){return null!=t&&void 0!==t[Xo]?t[Xo]():Qo(t)?Array.prototype[Xo].call(t):void 0}}else{var Zo=Do,ti=No,ei=Ee,ri=ei("%Map%",!0),ni=ei("%Set%",!0),oi=hr,ii=oi("Array.prototype.push"),si=oi("String.prototype.charCodeAt"),ai=oi("String.prototype.slice"),li=function(t){var e=0;return{next:function(){var r,n=e>=t.length;return n||(r=t[e],e+=1),{done:n,value:r}}}},ci=function(t,e){if(Zo(t)||Qo(t))return li(t);if(ti(t)){var r=0;return{next:function(){var e=function(t,e){if(e+1>=t.length)return e+1;var r=si(t,e);if(r<55296||r>56319)return e+1;var n=si(t,e+1);return n<56320||n>57343?e+1:e+2}(t,r),n=ai(t,r,e);return r=e,{done:e>t.length,value:n}}}}return e&&void 0!==t["_es6-shim iterator_"]?t["_es6-shim iterator_"]():void 0};if(ri||ni){var hi=$o,ui=Ko,pi=oi("Map.prototype.forEach",!0),yi=oi("Set.prototype.forEach",!0);if("undefined"==typeof process||!process.versions||!process.versions.node)var fi=oi("Map.prototype.iterator",!0),di=oi("Set.prototype.iterator",!0);var gi=oi("Map.prototype.@@iterator",!0)||oi("Map.prototype._es6-shim iterator_",!0),mi=oi("Set.prototype.@@iterator",!0)||oi("Set.prototype._es6-shim iterator_",!0);rn.exports=function(t){return function(t){if(hi(t)){if(fi)return Jo(fi(t));if(gi)return gi(t);if(pi){var e=[];return pi(t,(function(t,r){ii(e,[r,t])})),li(e)}}if(ui(t)){if(di)return Jo(di(t));if(mi)return mi(t);if(yi){var r=[];return yi(t,(function(t){ii(r,t)})),li(r)}}}(t)||ci(t)}}else rn.exports=function(t){if(null!=t)return ci(t,!0)}}var bi=rn.exports,vi=function(t){return t!=t},wi=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!vi(t)||!vi(e))},xi=wi,Si=function(){return"function"==typeof Object.is?Object.is:xi},ki=Si,ji=Je,Oi=Je,Ti=wi,Pi=Si,Ai=sr(Pi(),Object);Oi(Ai,{getPolyfill:Pi,implementation:Ti,shim:function(){var t=ki();return ji(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var Ii,Ei,Ci,Mi,Fi=Ai,Di=sr,Bi=hr,Ri=Ee("%ArrayBuffer%",!0),Gi=Bi("ArrayBuffer.prototype.byteLength",!0),Ni=Bi("Object.prototype.toString"),Li=!!Ri&&!Gi&&new Ri(0).slice,Wi=!!Li&&Di(Li),Ui=Gi||Wi?function(t){if(!t||"object"!=typeof t)return!1;try{return Gi?Gi(t):Wi(t,0),!0}catch(xl){return!1}}:Ri?function(t){return"[object ArrayBuffer]"===Ni(t)}:function(t){return!1},_i=Date.prototype.getDay,zi=Object.prototype.toString,$i=on(),Vi=hr,qi=on();if(qi){Ii=Vi("Object.prototype.hasOwnProperty"),Ei=Vi("RegExp.prototype.exec"),Ci={};var Hi=function(){throw Ci};Mi={toString:Hi,valueOf:Hi},"symbol"==typeof Symbol.toPrimitive&&(Mi[Symbol.toPrimitive]=Hi)}var Yi=Vi("Object.prototype.toString"),Ki=Object.getOwnPropertyDescriptor,Qi=qi?function(t){if(!t||"object"!=typeof t)return!1;var e=Ki(t,"lastIndex");if(!e||!Ii(e,"value"))return!1;try{Ei(t,Mi)}catch(xl){return xl===Ci}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===Yi(t)},Ji=hr("SharedArrayBuffer.prototype.byteLength",!0),Xi=Ji?function(t){if(!t||"object"!=typeof t)return!1;try{return Ji(t),!0}catch(xl){return!1}}:function(t){return!1},Zi=Number.prototype.toString,ts=Object.prototype.toString,es=on(),rs=hr,ns=rs("Boolean.prototype.toString"),os=rs("Object.prototype.toString"),is=on(),ss={exports:{}},as=Object.prototype.toString;if(zt()){var ls=Symbol.prototype.toString,cs=/^Symbol\(.*\)$/;ss.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==as.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&cs.test(ls.call(t))}(t)}catch(xl){return!1}}}else ss.exports=function(t){return!1};var hs=ss.exports,us={exports:{}},ps="undefined"!=typeof BigInt&&BigInt;if("function"==typeof ps&&"function"==typeof BigInt&&"bigint"==typeof ps(42)&&"bigint"==typeof BigInt(42)){var ys=BigInt.prototype.valueOf;us.exports=function(t){return null!=t&&"boolean"!=typeof t&&"string"!=typeof t&&"number"!=typeof t&&"symbol"!=typeof t&&"function"!=typeof t&&("bigint"==typeof t||function(t){try{return ys.call(t),!0}catch(xl){}return!1}(t))}}else us.exports=function(t){return!1};var fs,ds=us.exports,gs=No,ms=hs,bs=ds,vs="function"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,ws="function"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;vs||(fs=function(t){return!1});var xs=vs?vs.prototype.has:null,Ss=ws?ws.prototype.has:null;fs||xs||(fs=function(t){return!1});var ks=fs||function(t){if(!t||"object"!=typeof t)return!1;try{if(xs.call(t,xs),Ss)try{Ss.call(t,Ss)}catch(xl){return!0}return t instanceof vs}catch(xl){}return!1},js={exports:{}},Os=hr,Ts=Ee("%WeakSet%",!0),Ps=Os("WeakSet.prototype.has",!0);if(Ps){var As=Os("WeakMap.prototype.has",!0);js.exports=function(t){if(!t||"object"!=typeof t)return!1;try{if(Ps(t,Ps),As)try{As(t,As)}catch(xl){return!0}return t instanceof Ts}catch(xl){}return!1}}else js.exports=function(t){return!1};var Is,Es,Cs=js.exports,Ms=$o,Fs=Ko,Ds=ks,Bs=Cs,Rs=Function.prototype.toString,Gs="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof Gs&&"function"==typeof Object.defineProperty)try{Is=Object.defineProperty({},"length",{get:function(){throw Es}}),Es={},Gs((function(){throw 42}),null,Is)}catch(Sl){Sl!==Es&&(Gs=null)}else Gs=null;var Ns=/^\s*class\b/,Ls=function(t){try{var e=Rs.call(t);return Ns.test(e)}catch(xl){return!1}},Ws=function(t){try{return!Ls(t)&&(Rs.call(t),!0)}catch(xl){return!1}},Us=Object.prototype.toString,_s="function"==typeof Symbol&&!!Symbol.toStringTag,zs=!(0 in[,]),$s=function(){return!1};if("object"==typeof document){var Vs=document.all;Us.call(Vs)===Us.call(document.all)&&($s=function(t){if((zs||!t)&&(void 0===t||"object"==typeof t))try{var e=Us.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(xl){}return!1})}var qs=Gs?function(t){if($s(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{Gs(t,null,Is)}catch(xl){if(xl!==Es)return!1}return!Ls(t)&&Ws(t)}:function(t){if($s(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(_s)return Ws(t);if(Ls(t))return!1;var e=Us.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&Ws(t)},Hs=Object.prototype.toString,Ys=Object.prototype.hasOwnProperty,Ks=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],Qs="undefined"==typeof globalThis?o:globalThis,Js=function(t,e,r){if(!qs(e))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=r),"[object Array]"===Hs.call(t)?function(t,e,r){for(var n=0,o=t.length;n<o;n++)Ys.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,n):"string"==typeof t?function(t,e,r){for(var n=0,o=t.length;n<o;n++)null==r?e(t.charAt(n),n,t):e.call(r,t.charAt(n),n,t)}(t,e,n):function(t,e,r){for(var n in t)Ys.call(t,n)&&(null==r?e(t[n],n,t):e.call(r,t[n],n,t))}(t,e,n)},Xs=sr,Zs=hr,ta=De,ea=Zs("Object.prototype.toString"),ra=on(),na="undefined"==typeof globalThis?o:globalThis,oa=function(){for(var t=[],e=0;e<Ks.length;e++)"function"==typeof Qs[Ks[e]]&&(t[t.length]=Ks[e]);return t}(),ia=Zs("String.prototype.slice"),sa=Object.getPrototypeOf,aa=Zs("Array.prototype.indexOf",!0)||function(t,e){for(var r=0;r<t.length;r+=1)if(t[r]===e)return r;return-1},la={__proto__:null};Js(oa,ra&&ta&&sa?function(t){var e=new na[t];if(Symbol.toStringTag in e){var r=sa(e),n=ta(r,Symbol.toStringTag);if(!n){var o=sa(r);n=ta(o,Symbol.toStringTag)}la["$"+t]=Xs(n.get)}}:function(t){var e=new na[t],r=e.slice||e.set;r&&(la["$"+t]=Xs(r))});var ca=hr("ArrayBuffer.prototype.byteLength",!0),ha=Ui,ua=Ar,pa=hr,ya=en,fa=Ee,da=bi,ga=jo,ma=Fi,ba=un,va=Do,wa=Ui,xa=function(t){return"object"==typeof t&&null!==t&&($i?function(t){try{return _i.call(t),!0}catch(xl){return!1}}(t):"[object Date]"===zi.call(t))},Sa=Qi,ka=Xi,ja=Mt,Oa=function(t){return null==t||"object"!=typeof t&&"function"!=typeof t?null:gs(t)?"String":function(t){return"number"==typeof t||"object"==typeof t&&(es?function(t){try{return Zi.call(t),!0}catch(xl){return!1}}(t):"[object Number]"===ts.call(t))}(t)?"Number":function(t){return"boolean"==typeof t||null!==t&&"object"==typeof t&&(is&&Symbol.toStringTag in t?function(t){try{return ns(t),!0}catch(xl){return!1}}(t):"[object Boolean]"===os(t))}(t)?"Boolean":ms(t)?"Symbol":bs(t)?"BigInt":void 0},Ta=function(t){if(t&&"object"==typeof t){if(Ms(t))return"Map";if(Fs(t))return"Set";if(Ds(t))return"WeakMap";if(Bs(t))return"WeakSet"}return!1},Pa=function(t){if(!t||"object"!=typeof t)return!1;if(!ra){var e=ia(ea(t),8,-1);return aa(oa,e)>-1?e:"Object"===e&&function(t){var e=!1;return Js(la,(function(r,n){if(!e)try{r(t),e=ia(n,1)}catch(xl){}})),e}(t)}return ta?function(t){var e=!1;return Js(la,(function(r,n){if(!e)try{"$"+r(t)===n&&(e=ia(n,1))}catch(xl){}})),e}(t):null},Aa=function(t){return ha(t)?ca?ca(t):t.byteLength:NaN},Ia=pa("SharedArrayBuffer.prototype.byteLength",!0),Ea=pa("Date.prototype.getTime"),Ca=Object.getPrototypeOf,Ma=pa("Object.prototype.toString"),Fa=fa("%Set%",!0),Da=pa("Map.prototype.has",!0),Ba=pa("Map.prototype.get",!0),Ra=pa("Map.prototype.size",!0),Ga=pa("Set.prototype.add",!0),Na=pa("Set.prototype.delete",!0),La=pa("Set.prototype.has",!0),Wa=pa("Set.prototype.size",!0);function Ua(t,e,r,n){for(var o,i=da(t);(o=i.next())&&!o.done;)if(qa(e,o.value,r,n))return Na(t,o.value),!0;return!1}function _a(t){return void 0===t?null:"object"!=typeof t?"symbol"!=typeof t&&("string"!=typeof t&&"number"!=typeof t||+t==+t):void 0}function za(t,e,r,n,o,i){var s=_a(r);if(null!=s)return s;var a=Ba(e,s),l=ua({},o,{strict:!1});return!(void 0===a&&!Da(e,s)||!qa(n,a,l,i))&&!Da(t,s)&&qa(n,a,l,i)}function $a(t,e,r){var n=_a(r);return null!=n?n:La(e,n)&&!La(t,n)}function Va(t,e,r,n,o,i){for(var s,a,l=da(t);(s=l.next())&&!s.done;)if(qa(r,a=s.value,o,i)&&qa(n,Ba(e,a),o,i))return Na(t,a),!0;return!1}function qa(t,e,r,n){var o=r||{};if(o.strict?ma(t,e):t===e)return!0;if(Oa(t)!==Oa(e))return!1;if(!t||!e||"object"!=typeof t&&"object"!=typeof e)return o.strict?ma(t,e):t==e;var i,s=n.has(t),a=n.has(e);if(s&&a){if(n.get(t)===n.get(e))return!0}else i={};return s||n.set(t,i),a||n.set(e,i),function(t,e,r,n){var o,i;if(typeof t!=typeof e)return!1;if(null==t||null==e)return!1;if(Ma(t)!==Ma(e))return!1;if(ba(t)!==ba(e))return!1;if(va(t)!==va(e))return!1;var s=t instanceof Error,a=e instanceof Error;if(s!==a)return!1;if((s||a)&&(t.name!==e.name||t.message!==e.message))return!1;var l=Sa(t),c=Sa(e);if(l!==c)return!1;if((l||c)&&(t.source!==e.source||ya(t)!==ya(e)))return!1;var h=xa(t),u=xa(e);if(h!==u)return!1;if((h||u)&&Ea(t)!==Ea(e))return!1;if(r.strict&&Ca&&Ca(t)!==Ca(e))return!1;var p=Pa(t),y=Pa(e);if(p!==y)return!1;if(p||y){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}var f=Ha(t),d=Ha(e);if(f!==d)return!1;if(f||d){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}var g=wa(t),m=wa(e);if(g!==m)return!1;if(g||m)return Aa(t)===Aa(e)&&"function"==typeof Uint8Array&&qa(new Uint8Array(t),new Uint8Array(e),r,n);var b=ka(t),v=ka(e);if(b!==v)return!1;if(b||v)return Ia(t)===Ia(e)&&"function"==typeof Uint8Array&&qa(new Uint8Array(t),new Uint8Array(e),r,n);if(typeof t!=typeof e)return!1;var w=ja(t),x=ja(e);if(w.length!==x.length)return!1;for(w.sort(),x.sort(),o=w.length-1;o>=0;o--)if(w[o]!=x[o])return!1;for(o=w.length-1;o>=0;o--)if(!qa(t[i=w[o]],e[i],r,n))return!1;var S=Ta(t),k=Ta(e);return S===k&&("Set"===S||"Set"===k?function(t,e,r,n){if(Wa(t)!==Wa(e))return!1;for(var o,i,s,a=da(t),l=da(e);(o=a.next())&&!o.done;)if(o.value&&"object"==typeof o.value)s||(s=new Fa),Ga(s,o.value);else if(!La(e,o.value)){if(r.strict)return!1;if(!$a(t,e,o.value))return!1;s||(s=new Fa),Ga(s,o.value)}if(s){for(;(i=l.next())&&!i.done;)if(i.value&&"object"==typeof i.value){if(!Ua(s,i.value,r.strict,n))return!1}else if(!r.strict&&!La(t,i.value)&&!Ua(s,i.value,r.strict,n))return!1;return 0===Wa(s)}return!0}(t,e,r,n):"Map"!==S||function(t,e,r,n){if(Ra(t)!==Ra(e))return!1;for(var o,i,s,a,l,c,h=da(t),u=da(e);(o=h.next())&&!o.done;)if(a=o.value[0],l=o.value[1],a&&"object"==typeof a)s||(s=new Fa),Ga(s,a);else if(void 0===(c=Ba(e,a))&&!Da(e,a)||!qa(l,c,r,n)){if(r.strict)return!1;if(!za(t,e,a,l,r,n))return!1;s||(s=new Fa),Ga(s,a)}if(s){for(;(i=u.next())&&!i.done;)if(a=i.value[0],c=i.value[1],a&&"object"==typeof a){if(!Va(s,t,a,c,r,n))return!1}else if(!(r.strict||t.has(a)&&qa(Ba(t,a),c,r,n)||Va(s,t,a,c,ua({},r,{strict:!1}),n)))return!1;return 0===Wa(s)}return!0}(t,e,r,n))}(t,e,o,n)}function Ha(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0]||!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t)))}const Ya=i((function(t,e,r){return qa(t,e,r,ga())})),Ka={player:{x:ft.x,y:ft.y,flip:!1},journal:[],inventory:[],quests:[],warpers:[],settings:{gamepad:s(),debug:!1}},Qa={player:{x:ft.x-200,y:ft.y,flip:!1},journal:[E.FixTheClock,E.SphinxRiddleSolved,E.MetTheMayor],inventory:[T.Wrench,T.Gear1],quests:[{id:P.SphinxRiddle,completed:!0}],warpers:[{warpType:O.TownEast,state:!0},{warpType:O.TownNorth,state:!0},{warpType:O.ClockSquareNorth,state:!0}],settings:{gamepad:!1,debug:!0}};function Ja(t){let e,r=localStorage.getItem("save");try{r&&(e=JSON.parse(r))}catch(n){console.error(n),new tt(t,"Unfortunately, it looks like this save is corrupted.\nFailed to Load Game",1e4)}try{const r=e||Ka;if(r.settings.debug!==p.debug)return p.debug=r.settings.debug,void t.scene.restart();t.player.setX(r.player.x),t.player.setY(r.player.y),t.player.setFlipX(r.player.flip),r.journal.forEach((e=>t.player.journal.addEntry(e,!0))),r.inventory.forEach((e=>t.player.inventory.addItem(e,!0))),r.quests.forEach((e=>t.player.quests.addQuest(e,!0))),function(t,e){const r=$(t,N);e.forEach((t=>{const e=r.find((e=>e.warpType===t.warpType));e&&e.setVisible(t.state)}))}(t,r.warpers),t.gamepad.setVisible(r.settings.gamepad);const n=Ya(e,Ka)?"[New]":Ya(e,Qa)?"[Debug]":"[Storage]";new tt(t,`Game Loaded ${n}`)}catch(n){console.error(n),new tt(t,"Unfortunately, it looks like this save is corrupted.\nFailed to Load Game",1e4),Xa(t,Ka),Ja(t)}}function Xa(t,e){const r={player:{x:t.player.x,y:t.player.y,flip:t.player.flipX},journal:t.player.journal.journal,inventory:t.player.inventory.inventory,quests:t.player.quests.quests,warpers:Za(t),settings:{gamepad:t.gamepad.visible,debug:p.debug}};localStorage.setItem("save",JSON.stringify(e||r)),new tt(t,"Game Saved")}function Za(t){return $(t,N).map((t=>({warpType:t.warpType,state:t.visible})))}r.GameObjects.Container;class tl extends r.GameObjects.Container{constructor(t,r){super(t,100,p.height-100),e(this,"buttons",[]),e(this,"lastAxisKey"),this.setScrollFactor(0).setDepth(b.Overlay),t.add.existing(this),this.createDPad(),r||this.createButtons(),this.createControllerListeners()}update(t,e){var r,n,o,i,s,a;const l=null==(r=this.scene.input.gamepad)?void 0:r.pad1;if(!l)return;const c=l.axes[0].getValue();if(Math.abs(c)<=.1&&this.lastAxisKey)return null==(n=this.scene.input.keyboard)||n.emit("keyup-"+this.lastAxisKey),void(this.lastAxisKey=void 0);if(c>.1){if("RIGHT"===this.lastAxisKey)return;"LEFT"===this.lastAxisKey&&(null==(o=this.scene.input.keyboard)||o.emit("keyup-LEFT")),null==(i=this.scene.input.keyboard)||i.emit("keydown-RIGHT"),this.lastAxisKey="RIGHT"}if(c<-.1){if("LEFT"===this.lastAxisKey)return;"RIGHT"===this.lastAxisKey&&(null==(s=this.scene.input.keyboard)||s.emit("keyup-RIGHT")),null==(a=this.scene.input.keyboard)||a.emit("keydown-LEFT"),this.lastAxisKey="LEFT"}}createDPad(){const t=this.scene.add.container(20,-10);this.add(t);const e=this.scene.add.circle(0,0,60,d(f.Teal),.45).setStrokeStyle(3,d(f.Black));t.add(e),this.button(-57,0,"LEFT",t),this.button(57,0,"RIGHT",t),this.button(0,-57,"UP",t),this.button(0,57,"DOWN",t)}createButtons(){const t=this.scene.add.container(p.width-300,0);this.add(t);const e=this.scene.add.circle(40,0,65,d(f.Teal),.45).setStrokeStyle(3,d(f.Black)).setScale(1,.6).setAngle(-30);t.add(e),this.button(80,-20,"ENTER",t),this.button(0,20,"BACKSPACE",t)}createControllerListeners(){var t,e,r,n;null==(t=this.scene.input.gamepad)||t.on("connected",(t=>{new tt(this.scene,"Gamepad connected")})),null==(e=this.scene.input.gamepad)||e.on("disconnected",(t=>{new tt(this.scene,"Gamepad disconnected")})),null==(r=this.scene.input.gamepad)||r.on("down",((t,e)=>{var r;const n=this.getKeyFromButton(e);n&&(null==(r=this.scene.input.keyboard)||r.emit(`keydown-${n}`)),console.log("down",e)})),null==(n=this.scene.input.gamepad)||n.on("up",((t,e)=>{var r;const n=this.getKeyFromButton(e);n&&(null==(r=this.scene.input.keyboard)||r.emit(`keyup-${n}`)),console.log("up",e)}))}getKeyFromButton(t){let e;switch(t.index){case 0:e=t.pad.id.toLowerCase().includes("nintendo")?"BACKSPACE":"ENTER";break;case 1:e=t.pad.id.toLowerCase().includes("nintendo")?"ENTER":"BACKSPACE";break;case 9:e="ESC";break;case 12:e="UP";break;case 13:e="DOWN";break;case 14:e="LEFT";break;case 15:e="RIGHT"}return e}button(t,e,r,n){const o="ENTER"===r||"ESCAPE"===r?35:38,i=this.scene.add.circle(t,e,o,d(f.White),.8).setStrokeStyle(3,d(f.Black));i.setInteractive({useHandCursor:!0}).setScrollFactor(0),n.add(i),i.on("pointerdown",(()=>{var t;null==(t=this.scene.input.keyboard)||t.emit(`keydown-${r}`),i.setFillStyle(d(f.Teal),Math.min(1,1.05))})),i.on("pointerup",(()=>{var t;null==(t=this.scene.input.keyboard)||t.emit(`keyup-${r}`),i.setFillStyle(d(f.White),.8)})),i.on("pointerout",(()=>{var t;null==(t=this.scene.input.keyboard)||t.emit(`keyup-${r}`),i.setFillStyle(d(f.White),.8)})),this.buttons.push(i)}offsetButtons(t){t?this.setPosition(100,p.height-300):this.setPosition(100,p.height-100)}}class el extends r.GameObjects.Container{constructor(t){super(t,31,p.height-31),t.add.existing(this),this.setScrollFactor(0).setDepth(b.Ui);const e=t.add.rectangle(0,0,42,42,d(f.Teal)).setScrollFactor(0),r=t.add.image(-1,1,"settings");this.add(e),this.add(r),e.setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{t.scene.pause(),t.scene.launch("Paused",{game:this})}))}}class rl extends r.GameObjects.Container{constructor(t){super(t,81,p.height-31),t.add.existing(this),this.setScrollFactor(0).setDepth(b.Ui);const e=t.add.rectangle(0,0,42,42,d(f.Teal)).setScrollFactor(0),r=t.add.image(0,0,vt(t)?"moon":"sun");this.add(e),this.add(r),e.setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{const e=vt(t);(function(t){vt(t)?function(t,e=!0){bt||(xt(t,f.Night,e),t.lights.lights.forEach((r=>{const n=r.intensity;r.setVisible(!0),e&&(r.setIntensity(0),t.tweens.add({targets:r,duration:mt,intensity:n}))})))}(t):wt(t)})(t),r.setTexture(e?"sun":"moon")}))}}class nl extends r.Scene{constructor(){super("Game"),e(this,"player"),e(this,"interactiveObjects"),e(this,"clock"),e(this,"gamepad")}create(){this.createBackgrounds(),this.player=new dt(this);const t=new R(this),e=this.createWarpers(),r=this.createNpcs(),n=this.createItems(),o=this.createSlopes(),i=new k(this,3100,600);this.createLights(),new el(this),new rl(this),this.gamepad=new tl(this);const s=[this.player];this.clock=new v(this,s,this.player),this.interactiveObjects=this.add.group([...e,...r,...n],{runChildUpdate:!0}),this.add.group([this.player,this.clock,this.gamepad,i,...o],{runChildUpdate:!0}),this.physics.add.collider(this.player,t),this.createEventListeners();const a=this.cameras.main;a.startFollow(this.player,!0),a.setFollowOffset(0,p.cameraOffset),Ja(this)}update(){this.physics.overlap(this.interactiveObjects,this.player,this.player.setInteractiveObject,((t,e)=>void 0===t.visible||t.visible),this.player)||this.player.setInteractiveObject(void 0)}createBackgrounds(){const t=[this.physics.add.sprite(0,0,"town").setOrigin(0),this.physics.add.sprite(500,-1100,"clock_outside").setOrigin(0),this.physics.add.sprite(500,-2400,"clock_inner").setOrigin(0),this.physics.add.sprite(2300,0,"forest").setOrigin(0),this.physics.add.sprite(4400,100,"lake").setOrigin(0)];return t.forEach((t=>{"clock_inner"!==t.texture.key&&t.setPipeline("Light2D"),p.debug&&t.setInteractive({draggable:!0})})),t}createWarpers(){const t=[];for(const e in O)isNaN(Number(e))&&t.push(new N(this,O[e],this.player));return t}createNpcs(){return[new D(this,A.Inventor,this.player),new D(this,A.Stranger,this.player),new D(this,A.Sphinx,this.player),new D(this,A.Mayor,this.player),new D(this,A.ClockTower,this.player)]}createItems(){return[new Z(this,T.Gear1,this.player)]}createSlopes(){return[new gt(this,740,-1370,170,95),new gt(this,815,-2010,90,70)]}createLights(){this.lights.enable().setAmbientColor(d(f.White)),[{x:135,y:462,radius:150,color:d(f.Tan),intensity:2.5},{x:697,y:441},{x:1018,y:435},{x:887,y:200,radius:150},{x:1561,y:460},{x:791,y:472,intensity:.5},{x:962,y:469,intensity:.5},{x:162,y:814,intensity:2},{x:635,y:772},{x:1638,y:788,intensity:2}].forEach((t=>{p.debug?new w(this,t.x,t.y,t.radius||100,t.color||d(f.Lights),t.intensity||1):this.lights.addLight(t.x,t.y,t.radius||100,t.color||d(f.Lights),t.intensity||1)})),wt(this,!1)}createEventListeners(){var t,e;null==(t=this.input.keyboard)||t.on("keydown-ESC",(()=>{this.scene.pause(),this.scene.launch("Paused",{game:this})})),null==(e=this.input.keyboard)||e.on("keydown-J",(()=>{this.player.journal.openJournal()})),this.events.on("resume",(()=>{this.player.keys.resetKeys()}))}}class ol extends r.GameObjects.Container{constructor(t,n,o,i,s){var a,l;super(t,n,o),e(this,"textObject"),e(this,"maskGraphics"),e(this,"scrollbar"),e(this,"scrollY"),e(this,"boxHeight"),t.add.existing(this),this.scrollY=0,this.boxHeight=0,this.textObject=new r.GameObjects.Text(t,0,0,i,{...m,padding:{x:10,y:10},...s}),this.textObject.setOrigin(0).setScrollFactor(0).setInteractive(),this.add(this.textObject),t.input.on("wheel",this.handleScroll,this),this.textObject.on("pointermove",this.handleDrag,this),null==(a=t.input.keyboard)||a.on("keydown-UP",(()=>{this.scrollY-=30,this.updateTextPosition()})),null==(l=t.input.keyboard)||l.on("keydown-DOWN",(()=>{this.scrollY+=30,this.updateTextPosition()})),this.maskGraphics=t.add.graphics().setPosition(n,o).setScrollFactor(0).setVisible(!1),this.add(this.maskGraphics),this.scrollbar=t.add.rectangle(0,0,4,0,5592405).setScrollFactor(0),this.add(this.scrollbar)}setBoxSize(t,e){this.boxHeight=e,this.maskGraphics.clear(),this.maskGraphics.fillStyle(16777215),this.maskGraphics.fillRect(0,0,t,e);const r=this.maskGraphics.createGeometryMask();this.textObject.setMask(r),this.textObject.setWordWrapWidth(t-4),this.textObject.setFixedSize(t-4,0),this.updateTextPosition()}handleDrag(t){t.isDown&&(this.scrollY-=t.velocity.y,this.updateTextPosition())}handleScroll(t,e,r,n,o){this.scrollY+=.5*n,this.updateTextPosition()}updateTextPosition(){const t=Math.max(0,this.textObject.height-this.boxHeight);this.scrollY=Phaser.Math.Clamp(this.scrollY,0,t),this.textObject.y=-this.scrollY;const e=this.scrollY/t,r=this.boxHeight/this.textObject.height;this.scrollbar.height=r*this.boxHeight,this.scrollbar.setPosition(this.textObject.width-4,e*(this.boxHeight-r*this.boxHeight))}}const il={[E.FixTheClock]:"The inventor gave me a wrench to help fix the clock tower. I will also need three gears to repair it.",[E.ForestMazeSolved]:"I finally got through the forest maze. Next time should be much easier.",[E.SphinxRiddleSolved]:"I solved the sphinx’s riddle. Now I can pass through the forest.",[E.MetTheMayor]:"I have met the mayor of the town. She told me about the old clock tower. I should see if I can use the gear I found to try and fix it.",[E.ClockFirstGear]:"I found the first gear for the clock tower and placed it into the clock face. I still need two more gears to fix it."};class sl extends r.Scene{constructor(){super("JournalDialog"),e(this,"player")}init(t){this.player=t.player}create(){var t,e,r;const n=this.add.container(p.width/2,p.height/2);n.add(this.add.rectangle(0,0,.8*p.width,.8*p.height,0,.75).setStrokeStyle(4,d(f.Tan))),n.add(new st(this,.35*p.width,-.33*p.height,"X",(()=>this.close()))),n.add(this.add.text(0,-.33*p.height,"Journal",{...m,fontSize:48}).setOrigin(.5));const o=this.player.journal.journal.map((t=>`- ${il[t]}\n\n`)).reverse();new ol(this,.13*p.width,.25*p.height,o,{fontSize:32}).setBoxSize(.74*p.width,.62*p.height),new tl(this).setVisible(!1),null==(t=this.input.keyboard)||t.on("keydown-J",(()=>{this.close()})),null==(e=this.input.keyboard)||e.on("keydown-ESC",(()=>{this.close()})),null==(r=this.input.keyboard)||r.on("keydown-BACKSPACE",(()=>{this.close()}))}close(){this.scene.stop(),this.scene.resume("Game")}}function al(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ll(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?al(Object(r),!0).forEach((function(e){cl(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):al(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function cl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hl(t){return t.slice(0,-1)}function ul(t,e=0){return e?Array.from(Array(e-t).keys()).map((e=>e+t)):Array.from(Array(t).keys())}function pl(t){return[...new Set(t)]}function yl(t,e){const r=pl(t.map((t=>t.set))).filter(Boolean),n=(o=ul(1,t.length+1),i=r,[o,i].reduce(((t,e)=>t.filter((t=>!e.includes(t)))))).sort((()=>.5-e()));var o,i;t.filter((t=>!t.set)).forEach(((t,e)=>t.set=n[e]))}function fl(t,e,r=.5){hl(t).forEach(((n,o)=>{const i=t[o+1],s=n.set!==i.set,a=e()<=r;var l,c,h;s&&a&&(l=t,c=i.set,h=n.set,l.forEach((t=>{t.set===c&&(t.set=h)})),n.right=!1,i.left=!1)}))}const dl=48;class gl extends r.Scene{constructor(){super("Maze"),e(this,"parent"),e(this,"graphics"),e(this,"keys"),e(this,"maze"),e(this,"mazePlayer"),e(this,"nextUpdate")}init(t){this.parent=t.parent}create(){this.createMaze(),this.mazePlayer=this.add.ellipse(0,0,.8*dl,.8*dl,5601177).setSmoothness(32).setOrigin(-.13),this.cameras.main.startFollow(this.mazePlayer),this.keys=this.parent.keys}createMaze(){const t=q(this.parent.player.scene);this.maze=function(t=8,e=t,r=!0,n=1){const o=function(t){return function(){let e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}}(n),i=[],s=ul(t);for(let c=0;c<e;c+=1){const n=s.map((n=>({x:n,y:c,top:r||c>0,left:r||n>0,bottom:r||c<e-1,right:r||n<t-1})));i.push(n)}hl(i).forEach(((t,e)=>{yl(t,o),fl(t,o),function(t,e,r){const n=Object.values(function(t,e){let r=pl(t.map((t=>t.set))).reduce(((t,e)=>ll(ll({},t),{},{[e]:[]})),{});return t.forEach((t=>r[t.set].push(t))),r}(t)),{ceil:o}=Math;n.forEach((t=>{(function(t,e,r){e=null==e?1:e;const n=null==t?0:t.length;if(!n||e<1)return[];e=e>n?n:e;let o=-1;const i=n-1,s=[...t];for(;++o<e;){const t=o+Math.floor(r()*(i-o+1)),e=s[t];s[t]=s[o],s[o]=e}return s.slice(0,e)})(t,o(r()*t.length),r).forEach((t=>{if(t){const r=e[t.x];t.bottom=!1,r.top=!1,r.set=t.set}}))}))}(t,i[e+1],o)}));const a=(l=i)[l.length-1];var l;return yl(a,o),fl(a,o,1),i}(24,24,!0,t),this.graphics=this.add.graphics(),this.graphics.fillStyle(10040098,.5),this.graphics.fillRect(1104,1104,dl,dl),this.graphics.lineStyle(3,3385907),this.maze.forEach((t=>{t.forEach((t=>{if(t.top){const e=new Phaser.Geom.Line(t.x*dl,t.y*dl,t.x*dl+dl,t.y*dl);this.graphics.strokeLineShape(e)}if(t.bottom){const e=new Phaser.Geom.Line(t.x*dl,t.y*dl+dl,t.x*dl+dl,t.y*dl+dl);this.graphics.strokeLineShape(e)}if(t.left){const e=new Phaser.Geom.Line(t.x*dl,t.y*dl,t.x*dl,t.y*dl+dl);this.graphics.strokeLineShape(e)}if(t.right){const e=new Phaser.Geom.Line(t.x*dl+dl,t.y*dl,t.x*dl+dl,t.y*dl+dl);this.graphics.strokeLineShape(e)}}))})),this.cameras.main.setViewport(50,130,p.width-100,p.height-170)}update(t,e){if(t<this.nextUpdate)return;const n=this.keys.keys;n[C.Continue];const o=new r.Math.Vector2(0,0);n[C.Left]?o.x=-48:n[C.Right]?o.x=dl:n[C.Up]?o.y=-48:n[C.Down]&&(o.y=dl);const i=new r.Math.Vector2(this.mazePlayer.x+o.x,this.mazePlayer.y+o.y);if((this.mazePlayer.x!==i.x||this.mazePlayer.y!==i.y)&&this.canMove(i)){this.mazePlayer.setPosition(i.x,i.y);const t=new r.Math.Vector2(1104,1104);this.parent.setAngle(r.Math.Angle.BetweenPoints(i,t)),this.mazePlayer.x===t.x&&this.mazePlayer.y===t.y&&this.parent.close(!0)}this.nextUpdate=t+140}canMove(t){const e=t.x,n=t.y,o=r.Math.FloorTo(e/dl),i=r.Math.FloorTo(n/dl);if(o<0||i<0||o>=24||i>=24)return!1;const s=r.Math.FloorTo(this.mazePlayer.x/dl),a=r.Math.FloorTo(this.mazePlayer.y/dl),l=this.maze[a][s];return!(l.top&&n<this.mazePlayer.y||l.bottom&&n>this.mazePlayer.y||l.left&&e<this.mazePlayer.x||l.right&&e>this.mazePlayer.x)}}class ml extends r.Scene{constructor(){super("MazeDialog"),e(this,"player"),e(this,"container"),e(this,"arrow"),e(this,"keys")}init(t){this.player=t.player}create(){var t,e;this.container=this.add.container(p.width/2,p.height/2),this.container.add(this.add.rectangle(0,0,.95*p.width,.95*p.height,0,.9).setStrokeStyle(4,d(f.Tan))),this.container.add(new st(this,.44*p.width,-.4*p.height,"X",(()=>this.close(!1)))),this.container.add(this.add.text(0,-.4*p.height,"Find your way through the forest",{...m,fontSize:48}).setOrigin(.5)),this.arrow=this.add.sprite(.4*-p.width,.4*-p.height,"arrow").setScale(.5).setRotation(.75*Math.PI),this.container.add(this.arrow),null==(t=this.input.keyboard)||t.on("keydown-ESC",(()=>{this.close(!1)})),null==(e=this.input.keyboard)||e.on("keydown-BACKSPACE",(()=>{this.close(!1)})),new tl(this,!0).setVisible(this.player.scene.gamepad.visible),this.keys=new M(this),this.scene.launch("Maze",{parent:this})}setAngle(t){this.arrow.setRotation(t+Math.PI/2)}close(t){this.scene.stop(),this.scene.stop("Maze"),this.scene.resume("Game"),t?(L(O.Forest,this.player),this.player.journal.addEntry(E.ForestMazeSolved)):this.player.setPosition(G[O.TownEast].x-40,G[O.TownEast].y)}}class bl extends r.Scene{constructor(){super("Paused"),e(this,"parent")}init(t){this.parent=t.game}create(){var t;const{width:e,height:r}=p;this.add.rectangle(e/2,r/2,e,r,0,.75).setInteractive().on("pointerdown",(()=>this.resume())),this.add.text(e/2,100,"Game Paused",{...m,fontSize:72}).setOrigin(.5),this.add.text(e-20,20,`Build Time: ${new Date("2024-07-22T07:48:14.320Z").toLocaleString()}`,{...m,fontSize:16}).setOrigin(1,0);const n=!p.zoomed,o=n?100:88,i=r/2-(n?100:70),s=new at(this);s.addButton(new st(this,e/2,i,"Resume",(()=>this.resume()))),s.addButton(new st(this,e/2,i+o,"Save",(()=>{this.resume(),Xa(this.parent)}))),s.addButton(new st(this,e/2,i+2*o,"Load",(()=>{this.resume(),this.parent.scene.restart()}))),s.addButton(new st(this,e/2,i+3*o,"Toggle Gamepad",(()=>{this.parent.gamepad.setVisible(!this.parent.gamepad.visible)}))),null==(t=this.input.keyboard)||t.on("keydown-ESC",(()=>this.resume())),new tl(this).setVisible(!1)}resume(){this.scene.stop(),this.scene.resume("Game")}}class vl extends r.Scene{constructor(){super("Preloader")}init(){const t=this.add.rectangle(p.width/2,p.height/2,.75*p.width,32).setStrokeStyle(1,16777215),e=this.add.rectangle(4+t.x-t.width/2,p.height/2,4,27,16777215);this.load.on("progress",(t=>{e.width=.75*p.width*t-5}))}preload(){this.load.setPath("assets"),this.load.svg("sun","icons/sun.svg",{width:32,height:32}),this.load.svg("moon","icons/moon.svg",{width:32,height:32}),this.load.svg("settings","icons/settings.svg",{width:32,height:32}),this.load.image("town","maps/town.jpg"),this.load.image("clock_outside","maps/clock_outside.jpg"),this.load.image("clock_inner","maps/clock_inner.jpg"),this.load.image("forest","maps/forest.jpg"),this.load.image("lake","maps/lake.jpg"),this.load.image("ladder","ladder.png"),this.load.image("warp","warp.png"),this.load.image("watch","watch.png"),this.load.image("arrow","arrow.png"),this.load.image("gear","items/gear.png"),this.load.image("journal","items/journal.png"),this.load.image("wrench","items/wrench.png"),this.load.spritesheet("character","characters/player.png",{frameWidth:128,frameHeight:80}),this.load.image("player_portrait","characters/player_portrait.png"),this.load.image("inventor","characters/inventor.png"),this.load.image("inventor_portrait","characters/inventor_portrait.png"),this.load.image("stranger","characters/stranger.png"),this.load.image("stranger_portrait","characters/stranger_portrait.png"),this.load.image("sphinx","characters/sphinx.png"),this.load.image("sphinx_portrait","characters/sphinx_portrait.png"),this.load.image("mayor","characters/mayor.png"),this.load.image("mayor_portrait","characters/mayor_portrait.png"),this.load.image("clock_portrait","characters/clock_portrait.png")}create(){this.scene.start("Game")}}const wl={type:Phaser.AUTO,width:p.width,height:p.height,parent:"game-container",backgroundColor:1118481,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[y,vl,nl,bl,sl,ml,gl],input:{gamepad:!0},physics:{default:"arcade"},render:{pixelArt:!0,antialias:!1}};("m6x11","assets/m6x11.ttf",new FontFace("m6x11","url(assets/m6x11.ttf)").load().then((function(t){document.fonts.add(t)})).catch((function(t){return t}))).then((()=>{new r.Game(wl)}));
