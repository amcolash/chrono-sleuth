var e=Object.defineProperty,t=(t,s,i)=>(((t,s,i)=>{s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i})(t,"symbol"!=typeof s?s+"":s,i),i);import{p as s}from"./phaser-C2_wa_Fb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();let i=!1;i=!0;const a={debug:!1,width:1024,height:768,cameraOffset:256,dayMinutes:.25,rewindEnabled:!1,fastMode:!0};class r extends s.Scene{constructor(){super("Boot")}preload(){}create(){this.scene.start("Preloader")}}const n="fcfee9",o="e6c99d",h="303646",d="1c1831";function l(e){return Phaser.Display.Color.HexStringToColor(e).color}const c={fontFamily:"m5x7, sans-serif",fontSize:48,color:`#${n}`};class p extends s.GameObjects.Container{constructor(e,s,i){super(e,40,a.height-60),t(this,"currentTime",0),t(this,"player"),t(this,"rewindable"),t(this,"rewinding",!1),t(this,"counter",0),t(this,"bar"),t(this,"hand"),t(this,"timeText"),t(this,"dayOver"),this.setVisible(a.rewindEnabled).setDepth(1).setScrollFactor(0),this.scene.add.existing(this),this.rewindable=s,this.player=i,this.add(e.add.sprite(0,0,"watch").setScale(.25)),this.hand=e.add.rectangle(0,10,3,14,l(d)).setOrigin(0,0),this.add(this.hand),this.timeText=e.add.text(15,10,"",c).setScrollFactor(0),this.bar=e.add.rectangle(0,a.height-6,0,6,13412864).setScrollFactor(0)}update(e,t){}}var u=(e=>(e[e.None=0]="None",e[e.Teleported=1]="Teleported",e[e.Talked=2]="Talked",e[e.Item=3]="Item",e))(u||{}),y=(e=>(e[e.Underground=0]="Underground",e[e.Town=1]="Town",e[e.TownEast=2]="TownEast",e[e.Forest=3]="Forest",e[e.TownNorth=4]="TownNorth",e[e.ClockSquare=5]="ClockSquare",e[e.ClockSquareNorth=6]="ClockSquareNorth",e[e.ClockEntrance=7]="ClockEntrance",e[e.ClockStairs=8]="ClockStairs",e[e.ClockTop=9]="ClockTop",e))(y||{}),g=(e=>(e[e.Wrench=0]="Wrench",e[e.Gear=1]="Gear",e))(g||{}),m=(e=>(e[e.Inventor=0]="Inventor",e[e.Stranger=1]="Stranger",e[e.ClockTower=2]="ClockTower",e))(m||{}),w=(e=>(e[e.InventorBookFound=0]="InventorBookFound",e[e.StrangerMapFound=1]="StrangerMapFound",e))(w||{});const x={[m.Inventor]:[{messages:["My name is Johan and I am an inventor.","This is a weird place."]}],[m.Stranger]:[{messages:["Who am I?","Eventually, you will learn."]}],[m.ClockTower]:[{messages:["This dusty clock tower hasn't told the correct time in many years.","It appears to be missing some gears."]}]};function b(e,t){return e.some((e=>e.id===t&&!e.completed))}function v(e,t){return e.some((e=>e.id===t&&e.completed))}function k(e,t){return e.includes(t)}const T={[m.Inventor]:{x:550,y:635,scale:.75,img:"inventor",portrait:"inventor_portrait",name:"Johan the Inventor"},[m.Stranger]:{x:750,y:865,scale:1.35,img:"stranger",portrait:"stranger_portrait",name:"Mysterious Stranger"},[m.ClockTower]:{x:880,y:-2090,scale:.7,img:"warp",portrait:"",name:"Clock Tower"}};class f extends Phaser.Physics.Arcade.Sprite{constructor(e,s,i){const{x:a,y:r,img:n,scale:o}=T[s];super(e,a,r,n),t(this,"npcType"),t(this,"player"),this.npcType=s,this.player=i,this.scale=o,e.add.existing(this),e.physics.add.existing(this)}onInteract(e){if(this.player.message.visible||Date.now()<this.player.message.interactionTimeout)return u.None;if(e.SPACE.isDown||e.ENTER.isDown){const e=function(e,t){const s=x[e]||[];for(const r of s){const{conditions:e}=r,s=[];if(void 0!==(null==e?void 0:e.hasItem)&&s.push((i=t.inventory.inventory,a=e.hasItem,i.includes(a))),void 0!==(null==e?void 0:e.completedQuest)&&s.push(v(t.quests.quests,e.completedQuest)),void 0!==(null==e?void 0:e.activeQuest)&&s.push(b(t.quests.quests,e.activeQuest)),void 0!==(null==e?void 0:e.journalEntry)&&s.push(k(t.journal.journal,e.journalEntry)),void 0!==(null==e?void 0:e.noJournalEntry)&&s.push(!k(t.journal.journal,e.noJournalEntry)),null==e?void 0:e.or){if(s.some((e=>e)))return r}else if(s.every((e=>e)))return r}var i,a}(this.npcType,this.player);if(!e)return u.None;const t=T[this.npcType].portrait.length>0;return this.player.message.setDialog(e,t?this.npcType:void 0),u.Talked}return u.None}getButtonPrompt(){return this.npcType===m.ClockTower?["Inspect Clock Tower","Press [CONTINUE]"]:[`Talk to ${T[this.npcType].name}`,"Press [CONTINUE]"]}}const S={[g.Wrench]:{x:0,y:0,image:"wrench"},[g.Gear]:{x:3500,y:810,image:"gear"}};Phaser.Physics.Arcade.Sprite;class C extends s.GameObjects.Container{constructor(e){super(e,a.width-320,20),t(this,"inventory",[]),this.setScrollFactor(0).setDepth(1).setVisible(!1),e.add.existing(this),this.add(e.add.rectangle(0,0,300,90,l(h)).setStrokeStyle(2,l(n)).setAlpha(.75).setOrigin(0)),this.add(e.add.text(10,10,"Inventory",c))}addItem(e){this.inventory.push(e);const t=30+40*(this.inventory.length-1);this.add(this.scene.add.sprite(t,60,S[e].image).setScale(.15)),this.updateItems()}removeItem(e){var t;const s=this.inventory.indexOf(e);s>-1&&(this.inventory.splice(s,1),null==(t=this.getAll().find((t=>{var s;return(null==(s=t.texture)?void 0:s.key)===S[e].image})))||t.destroy()),this.updateItems()}updateItems(){let e=0;this.getAll().forEach((t=>{if(t instanceof s.GameObjects.Sprite){const s=30+40*e;t.setPosition(s,60),e++}})),this.setVisible(this.inventory.length>0)}}class P extends s.GameObjects.Text{constructor(e,t){super(e,0,30,t,{...c,backgroundColor:"#"+h,padding:{x:10,y:5}}),this.setAlpha(0).setDepth(2).setScrollFactor(0).setX(a.width-this.displayWidth-20),e.add.existing(this),e.add.tween({targets:this,alpha:1,duration:350,hold:3500,yoyo:!0,repeat:0,onComplete:()=>this.destroy()})}}class I extends s.GameObjects.Sprite{constructor(e,s){super(e,a.width-50,a.height-50,"journal"),t(this,"player"),t(this,"journal",[]),t(this,"unread"),this.setScrollFactor(0).setDepth(1).setScale(.5).setAlpha(0).setInteractive().setActive(!1),this.on("pointerdown",this.openJournal),e.add.existing(this),this.player=s,this.unread=e.add.ellipse(a.width-20,a.height-85,20,20,11141120).setStrokeStyle(2,l(d)).setScrollFactor(0).setDepth(2).setVisible(!1)}addEntry(e){0===this.journal.length&&(this.scene.tweens.add({targets:this,alpha:1,duration:300}),this.setActive(!0)),this.journal.push(e),this.unread.setVisible(!0),new P(this.scene,"New joural entry added!")}openJournal(){0!==this.journal.length&&(this.unread.setVisible(!1),this.scene.scene.pause(),this.scene.scene.launch("JournalDialog",{player:this.player}))}}class O extends s.GameObjects.Container{constructor(e){super(e,a.width-320,120),t(this,"quests",[]),t(this,"questRectangle"),t(this,"shifted",!0),e.add.existing(this),this.setScrollFactor(0).setDepth(1).setVisible(!1),this.questRectangle=e.add.rectangle(0,0,300,60,l(h)).setStrokeStyle(2,l(n)).setAlpha(.75).setOrigin(0),this.add(this.questRectangle),this.add(e.add.text(10,10,"Quests",c))}addQuest(e){this.quests.push(e);const t=10+30*this.quests.length;this.add(this.scene.add.text(10,t,e.name,{...c,fontSize:24})),this.updateQuests()}updateExistingQuest(e,t){const s=this.quests.find((t=>t.id===e));s&&(s.completed=t),this.updateQuests()}updateQuests(){const e=this.quests.filter((e=>!e.completed));let t=1;this.getAll().forEach((i=>{if(i instanceof s.GameObjects.Text)if(e.find((e=>i.text===e.name))||"Quests"===i.text){if("Quests"!==i.text){const e=20+30*t;i.setPosition(10,e),t++}}else i.destroy()})),this.setY(this.shifted?130:20),this.setVisible(e.length>0),this.questRectangle.setSize(300,50+30*e.length)}reset(){this.quests=[],this.updateQuests()}}class E extends s.GameObjects.Text{constructor(e){super(e,a.width/2,a.height-50,"",c),this.setOrigin(.5).setBackgroundColor("#"+d).setPadding(10,5).setAlign("center").setAlpha(.9).setScrollFactor(0).setDepth(2).setVisible(!1),e.add.existing(this)}show(e){this.setText(e).setVisible(!0)}hide(){this.setVisible(!1)}}const N=20,{width:K,height:j}=a,D=K-120-80;class F extends s.GameObjects.Container{constructor(e,i){var a,r;super(e),t(this,"player"),t(this,"npcName"),t(this,"text"),t(this,"box"),t(this,"image"),t(this,"dialog"),t(this,"messageIndex"),t(this,"interactionTimeout"),e.add.existing(this),this.setScrollFactor(0),this.setPosition(N,j-N-170),this.setDepth(2),this.setVisible(!1),this.player=i,this.npcName=new s.GameObjects.Text(e,170,15,"",{...c,color:"#"+o}),this.text=new s.GameObjects.Text(e,170,50,"",c),this.text.width=D,this.text.height=130,this.text.setOrigin(0).setWordWrapWidth(D,!0).setFixedSize(D,130),this.image=new s.GameObjects.Image(e,N,N,"").setOrigin(0).setScale(1.5),this.box=new s.GameObjects.Rectangle(e,0,0,K-40,170,l(d),.7),this.box.setStrokeStyle(2,l(o),1),this.box.setOrigin(0,0),this.add([this.box,this.npcName,this.text,this.image]),null==(a=this.scene.input.keyboard)||a.on("keydown-ENTER",(()=>{this.updateDialog()})),null==(r=this.scene.input.keyboard)||r.on("keydown-SPACE",(()=>{this.updateDialog()}))}setDialog(e,t){this.setVisible(void 0!==e),this.messageIndex=0,this.dialog=e,this.interactionTimeout=Date.now()+350,e&&(void 0===t?(this.npcName.setVisible(!1),this.image.setVisible(!1),this.text.setPosition(N,N)):(this.npcName.setVisible(!0),this.npcName.setText(T[t].name),this.image.setVisible(!0),this.image.setTexture(T[t].portrait),this.text.setPosition(170,50)),this.showMessage())}showMessage(){var e;const t=null==(e=this.dialog)?void 0:e.messages,s=t&&t[this.messageIndex];s&&(this.text.setText(s),this.text.getWrappedText().length>4&&console.error("Message too long!",s))}updateDialog(){Date.now()<this.interactionTimeout||this.dialog&&(this.messageIndex++,this.messageIndex>=this.dialog.messages.length?(this.dialog.onCompleted&&this.dialog.onCompleted(this.player),this.dialog=void 0,this.setVisible(!1)):this.showMessage(),this.interactionTimeout=Date.now()+350)}}const A=2.5*(a.fastMode?350:120),V=new s.Math.Vector2(400,650);class q extends Phaser.Physics.Arcade.Sprite{constructor(e){var s,i;super(e,V.x,V.y,"character",0),t(this,"keys"),t(this,"buttonPrompt"),t(this,"interactive"),t(this,"interactionTimeout",0),t(this,"message"),t(this,"inventory"),t(this,"quests"),t(this,"journal"),t(this,"counter",0),t(this,"history",[]),t(this,"rewinding",!1),this.keys=null==(s=e.input.keyboard)?void 0:s.addKeys("W,A,S,D,UP,DOWN,LEFT,RIGHT,ENTER,SPACE"),e.add.existing(this),e.physics.add.existing(this),this.setBodySize(24,36),this.setOffset(0,0),this.depth=1,this.scale=2.5,(i=this).anims.create({key:"walk",frames:i.anims.generateFrameNumbers("character",{start:0,end:5}),frameRate:4,repeat:-1}),i.anims.play("walk"),this.buttonPrompt=new E(e),this.message=new F(e,this),this.inventory=new C(e),this.quests=new O(e),this.journal=new I(e,this)}update(e,t){this.buttonPrompt.setVisible(this.interactive&&!this.message.visible&&this.buttonPrompt.text.length>0||!1);let s=this.quests.shifted;this.quests.shifted=this.inventory.visible,s!==this.quests.shifted&&this.quests.updateQuests(),this.setVelocity(0),this.rewinding?this.counter+t>31.25?(this.rewind(),this.counter=0):this.counter+=t:this.checkInteraction()||this.message.visible||this.updateVelocity(),function(e){var t;const s=(null==(t=e.body)?void 0:t.velocity.x)||0,i=s<0;Math.abs(s)>0?(e.anims.resume(),e.flipX=e.rewinding?!i:i):e.anims.pause()}(this)}checkInteraction(){let e;return this.interactive&&Date.now()>this.interactionTimeout&&(e=this.interactive.onInteract(this.keys),e!==u.None&&(this.interactionTimeout=Date.now()+(this.interactive.interactionTimeout||500),e===u.Teleported&&(this.interactive=void 0))),e}updateVelocity(){const e=this.keys.LEFT.isDown||this.keys.A.isDown,t=this.keys.RIGHT.isDown||this.keys.D.isDown;this.keys.UP.isDown||this.keys.W.isDown,this.keys.DOWN.isDown||this.keys.S.isDown;let s=A;e&&this.setVelocityX(-s),t&&this.setVelocityX(s),e&&t&&this.setVelocityX(0)}record(){var e;this.history.length<1e3?this.history.push(new Phaser.Math.Vector3(this.x,this.y,(null==(e=this.body)?void 0:e.velocity.x)||0)):console.warn("Max history reached")}rewind(){const e=this.history.pop();e&&(this.x=e.x,this.y=e.y,this.setVelocityX(-e.z))}setRewind(e){this.rewinding=e,this.counter=0}reset(){this.quests.reset(),this.setPosition(V.x,V.y),this.flipX=!1,this.setVelocity(0)}setInteractiveObject(e){var t;this.interactive=e,this.buttonPrompt.setText((null==(t=null==e?void 0:e.getButtonPrompt)?void 0:t.call(e))||"")}}class G extends s.GameObjects.Container{constructor(e,s){super(e,0,0),t(this,"text"),t(this,"player"),t(this,"activeElement"),t(this,"outline")}update(){}}class W extends s.Physics.Arcade.StaticGroup{constructor(e){super(e.physics.world,e),[{x:40,y:600},{x:1750,y:600},{x:90,y:820},{x:1650,y:820},{x:2600,y:780},{x:3650,y:780},{x:550,y:-400},{x:1150,y:-400},{x:640,y:-1380},{x:1020,y:-1380},{x:750,y:-2075},{x:900,y:-2075}].forEach((t=>{const s=e.add.rectangle(t.x,t.y,6,100).setOrigin(0).setVisible(a.debug);this.add(s)}))}}const M={[y.Town]:{x:300,y:650,key:[Phaser.Input.Keyboard.KeyCodes.DOWN],warpTo:y.Underground,visible:!0},[y.Underground]:{x:301,y:875,key:[Phaser.Input.Keyboard.KeyCodes.UP],warpTo:y.Town,visible:!0},[y.TownEast]:{x:1720,y:650,key:[Phaser.Input.Keyboard.KeyCodes.RIGHT,Phaser.Input.Keyboard.KeyCodes.D],warpTo:y.Forest,visible:!1},[y.Forest]:{x:2650,y:810,key:[Phaser.Input.Keyboard.KeyCodes.LEFT,Phaser.Input.Keyboard.KeyCodes.A],warpTo:y.TownEast,visible:!1},[y.TownNorth]:{x:775,y:650,key:[Phaser.Input.Keyboard.KeyCodes.UP],warpTo:y.ClockSquare,visible:!1},[y.ClockSquare]:{x:720,y:-330,key:[Phaser.Input.Keyboard.KeyCodes.DOWN],warpTo:y.TownNorth,visible:!1},[y.ClockSquareNorth]:{x:915,y:-330,key:[Phaser.Input.Keyboard.KeyCodes.UP],warpTo:y.ClockEntrance,visible:!1},[y.ClockEntrance]:{x:900,y:-1320,key:[Phaser.Input.Keyboard.KeyCodes.DOWN],warpTo:y.ClockSquareNorth,visible:!1},[y.ClockStairs]:{x:735,y:-1320,key:[Phaser.Input.Keyboard.KeyCodes.UP],warpTo:y.ClockTop,visible:!1},[y.ClockTop]:{x:790,y:-2005,key:[Phaser.Input.Keyboard.KeyCodes.DOWN],warpTo:y.ClockStairs,visible:!1}};class R extends s.Physics.Arcade.Sprite{constructor(e,i,a){const{x:r,y:d,visible:c,warpTo:p}=M[i];super(e,r,d,c?"ladder":"warp"),t(this,"warpType"),t(this,"player"),t(this,"particles"),this.warpType=i,this.player=a,this.scale=.5,e.add.existing(this),e.physics.add.existing(this),c||(this.particles=e.add.particles(r,d,"warp",{x:{min:-3,max:3},y:{min:-3,max:3},speed:{random:[-40,40]},scale:{min:.35,max:.5},alpha:{start:.2,end:0},angle:{min:0,max:360},color:[l(h),l(n),l(o)],colorEase:"Linear",radial:!0,blendMode:s.BlendModes.OVERLAY}).setScale(1,1.75),this.particles=e.add.particles(r,d,"warp",{x:{min:-30,max:30},y:{min:-50,max:50},speed:{random:[-5,5]},scale:{min:.05,max:.15},alpha:{values:[0,.2,0]},angle:{min:0,max:360},lifespan:{min:1e3,max:1400},color:[l("d07151"),l(n),l(o)],colorEase:"Linear",radial:!0,maxAliveParticles:20})),i===y.Underground&&(e.add.sprite(r,d-60,"ladder").setScale(.5),e.add.sprite(r,d-105,"ladder").setScale(.5))}onInteract(e){let t=!1;const s=M[this.warpType].key;if(Object.values(e).forEach((e=>{e.isDown&&s.includes(e.keyCode)&&(t=!0)})),t){const{x:e,y:t}=M[M[this.warpType].warpTo],s=e-this.scene.cameras.main.width/2,i=t-this.scene.cameras.main.height/2;return this.scene.cameras.main.stopFollow(),this.player.setActive(!1),this.scene.tweens.add({targets:this.scene.cameras.main,scrollX:s,scrollY:i-a.cameraOffset,duration:400,ease:"Power1",onComplete:()=>{this.scene.cameras.main.startFollow(this.player),this.scene.cameras.main.setFollowOffset(0,a.cameraOffset),this.player.setActive(!0)}}),this.scene.tweens.add({targets:this.player,alpha:0,duration:300,ease:"Power1",yoyo:!0,repeat:0,onYoyo:()=>{this.player.setPosition(e,t)},onComplete:()=>{this.player.alpha=1}}),u.Teleported}return u.None}getButtonPrompt(){const e=M[this.warpType].key.map((e=>e===Phaser.Input.Keyboard.KeyCodes.ENTER||e===Phaser.Input.Keyboard.KeyCodes.SPACE?"[CONTINUE]":e===Phaser.Input.Keyboard.KeyCodes.UP||e===Phaser.Input.Keyboard.KeyCodes.W?"[UP]":e===Phaser.Input.Keyboard.KeyCodes.DOWN||e===Phaser.Input.Keyboard.KeyCodes.S?"[DOWN]":e===Phaser.Input.Keyboard.KeyCodes.LEFT||e===Phaser.Input.Keyboard.KeyCodes.A?"[LEFT]":e===Phaser.Input.Keyboard.KeyCodes.RIGHT||e===Phaser.Input.Keyboard.KeyCodes.D?"[RIGHT]":"[UNKNOWN]")),t=[...new Set(e)];return[`Travel to ${y[M[this.warpType].warpTo]}`,"Press "+t.join(" or ")]}}class U extends s.Scene{constructor(){super("Game"),t(this,"player"),t(this,"interactiveObjects"),t(this,"clock")}create(){this.createBackgrounds(),this.player=new q(this);const e=new W(this),t=this.createWarpers(),s=this.createNpcs(),i=this.createItems(),r=new G(this,this.player),n=[this.player];this.clock=new p(this,n,this.player),this.interactiveObjects=this.add.group([...t,...s,...i],{runChildUpdate:!0}),this.add.group([this.player,this.clock,r],{runChildUpdate:!0}),this.physics.add.collider(this.player,e),this.createEventListeners(),this.cameras.main.startFollow(this.player,!0),this.cameras.main.setFollowOffset(0,a.cameraOffset)}update(){this.physics.overlap(this.interactiveObjects,this.player,this.player.setInteractiveObject,void 0,this.player)||this.player.setInteractiveObject(void 0)}createBackgrounds(){return[this.physics.add.sprite(0,0,"town").setOrigin(0),this.physics.add.sprite(2300,0,"forest").setOrigin(0),this.physics.add.sprite(500,-1100,"clock_outside").setOrigin(0),this.physics.add.sprite(500,-2400,"clock_inner").setOrigin(0)]}createWarpers(){const e=[];for(const t in y)isNaN(Number(t))&&e.push(new R(this,y[t],this.player));return e}createNpcs(){return[new f(this,m.Inventor,this.player),new f(this,m.Stranger,this.player),new f(this,m.ClockTower,this.player)]}createItems(){return[]}createEventListeners(){var e,t;null==(e=this.input.keyboard)||e.on("keydown-ESC",(()=>{this.scene.pause(),this.scene.launch("Paused")})),null==(t=this.input.keyboard)||t.on("keydown-J",(()=>{this.player.journal.openJournal()}))}}class B extends s.GameObjects.Text{constructor(e,t,s,i,a){super(e,t,s,i,{...c,fontSize:48,backgroundColor:"#05a",padding:{x:15,y:10}}),this.setOrigin(.5),e.add.existing(this),this.setInteractive(),this.on("pointerdown",(()=>a())),this.on("pointerover",(()=>this.setBackgroundColor("#06e"))),this.on("pointerout",(()=>this.setBackgroundColor("#05a")))}}const L={[w.InventorBookFound]:"I found Johan the inventor's book. He told me that I should seek the stranger underground.",[w.StrangerMapFound]:"I found the stranger's map. The stranger told me that the mayor was making a shady deal in the forest at nighttime."};class Q extends s.Scene{constructor(){super("JournalDialog"),t(this,"player")}init(e){this.player=e.player}create(){var e,t;const i=this.add.container(a.width/2,a.height/2);i.add(this.add.rectangle(0,0,.8*a.width,.8*a.height,0,.75).setStrokeStyle(4,l(o))),i.add(new B(this,.3*a.width,-.33*a.height,"Close",(()=>this.close()))),i.add(this.add.text(0,-.33*a.height,"Journal",{...c,fontSize:36}).setOrigin(.5));const r=this.add.text(0,-.2*a.height,this.player.journal.journal.map((e=>"- "+L[e]+"\n\n")).reverse(),{...c,wordWrap:{width:.7*a.width},align:"left"}).setOrigin(.5,0).setInteractive({draggable:!0});r.on("drag",((e,t,i)=>{r.y=s.Math.Clamp(i,.5*-r.displayHeight,.2*-a.height)})),i.add(r);const n=this.make.graphics();n.fillStyle(16777215),n.fillRect(.15*a.width,.2*a.height,.75*a.width,.7*a.height);const h=new Phaser.Display.Masks.BitmapMask(this,n);r.setMask(h),null==(e=this.input.keyboard)||e.on("keydown-J",(()=>{this.close()})),null==(t=this.input.keyboard)||t.on("keydown-ESC",(()=>{this.close()}))}close(){this.scene.stop(),this.scene.resume("Game")}}class J extends s.Scene{constructor(){super("Paused")}create(){var e;const t=a.width,s=a.height;this.add.rectangle(t/2,s/2,t,s,0,.75),this.add.text(t/2,300,"Game Paused",{...c,fontSize:72}).setOrigin(.5),new B(this,t/2,s/2+50,"Resume",(()=>this.resume())),null==(e=this.input.keyboard)||e.on("keydown-ESC",(()=>this.resume()))}resume(){this.scene.resume("Game"),this.scene.stop()}}class _ extends s.Scene{constructor(){super("Preloader")}init(){this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("town","maps/town.jpg"),this.load.image("forest","maps/forest.jpg"),this.load.image("clock_outside","maps/clock_outside.jpg"),this.load.image("clock_inner","maps/clock_inner.jpg"),this.load.image("ladder","ladder.png"),this.load.image("warp","warp.png"),this.load.image("watch","watch.png"),this.load.image("gear","items/gear.png"),this.load.image("map","items/map.png"),this.load.spritesheet("character","characters/player.png",{frameWidth:24,frameHeight:36}),this.load.image("inventor","characters/inventor.png"),this.load.image("inventor_portrait","characters/inventor_portrait.png"),this.load.image("stranger","characters/stranger.png"),this.load.image("stranger_portrait","characters/stranger_portrait.png")}create(){this.scene.start("Game")}}const H={type:Phaser.AUTO,width:a.width,height:a.height,parent:"game-container",backgroundColor:1118481,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[r,_,U,J,Q],physics:{default:"arcade",arcade:{debug:a.debug}},render:{pixelArt:!0,antialias:!1}};("m5x7","assets/m5x7.ttf",new FontFace("m5x7","url(assets/m5x7.ttf)").load().then((function(e){document.fonts.add(e)})).catch((function(e){return e}))).then((()=>{new s.Game(H)}));
